<?xml version="1.0"?> <!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>
    <def-cat n="nom">
      <cat-item tags="n.*"/><!--Falten els altres np (antroponims) que tenen gen i nbr, revisar regles.-->
      <cat-item tags="np.loc.*"/>
    </def-cat>

     <def-cat n="ant">
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.cog.*"/>
    </def-cat>

     <def-cat n="cog">
      <cat-item tags="np.cog.*"/>
    </def-cat>

     <def-cat n="loc">
      <cat-item tags="np.loc.*"/>
    </def-cat>

    <def-cat n="sent">
       <cat-item tags="sent"/>
    </def-cat>

    <def-cat n="sent_coma">
       <cat-item tags="cm"/><!-- provem amb la coma EO, per a poder tractar el pro-drop-->
    </def-cat>

    <def-cat n="guio">
       <cat-item tags="guio"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="adjADJ"> <!-- únicament adjs, no pp -->
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>

    <def-cat n="unknown"> <!-- unknown words -->
      <cat-item tags=""/>
    </def-cat>

    <def-cat n="el">
      <cat-item lemma="el" tags="det.*"/>
    </def-cat>

    <def-cat n="el_det_ms">
      <cat-item lemma="el" tags="det.def.m.sg"/>
    </def-cat>

    <def-cat n="un_sg">
      <cat-item lemma="un" tags="det.ind.*.sg"/>
    </def-cat>
    <def-cat n="un_pl">
      <cat-item lemma="un" tags="det.ind.*.pl"/>
    </def-cat>


   <def-cat n="det"><!--Determinants i predeterminants, van anteposats en català -->
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
      <cat-item tags="num.*"/>
    </def-cat>

   <def-cat n="dem">
      <cat-item tags="det.dem.*"/>
    </def-cat>
   <def-cat n="def">
      <cat-item tags="det.def.*"/>
    </def-cat>
   <def-cat n="qnt">
      <cat-item tags="det.qnt.*"/>
    </def-cat>

   <def-cat n="tot">
      <cat-item lemma="tot" tags="det.*"/>
      <cat-item lemma="tot" tags="predet.*"/>
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num"/>
      <cat-item tags="num.*"/>
    </def-cat>

    <def-cat n="num_dato">
      <cat-item lemma="1" tags="num.*"/>
      <cat-item lemma="2" tags="num.*"/>
      <cat-item lemma="3" tags="num.*"/>
      <cat-item lemma="4" tags="num.*"/>
      <cat-item lemma="5" tags="num.*"/>
      <cat-item lemma="6" tags="num.*"/>
      <cat-item lemma="7" tags="num.*"/>
      <cat-item lemma="8" tags="num.*"/>
      <cat-item lemma="9" tags="num.*"/>
      <cat-item lemma="10" tags="num.*"/>
      <cat-item lemma="11" tags="num.*"/>
      <cat-item lemma="12" tags="num.*"/>
      <cat-item lemma="13" tags="num.*"/>
      <cat-item lemma="14" tags="num.*"/>
      <cat-item lemma="15" tags="num.*"/>
      <cat-item lemma="16" tags="num.*"/>
      <cat-item lemma="17" tags="num.*"/>
      <cat-item lemma="18" tags="num.*"/>
      <cat-item lemma="19" tags="num.*"/>
      <cat-item lemma="20" tags="num.*"/>
      <cat-item lemma="21" tags="num.*"/>
      <cat-item lemma="22" tags="num.*"/>
      <cat-item lemma="23" tags="num.*"/>
      <cat-item lemma="24" tags="num.*"/>
      <cat-item lemma="25" tags="num.*"/>
      <cat-item lemma="26" tags="num.*"/>
      <cat-item lemma="27" tags="num.*"/>
      <cat-item lemma="28" tags="num.*"/>
      <cat-item lemma="29" tags="num.*"/>
      <cat-item lemma="30" tags="num.*"/>
      <cat-item lemma="31" tags="num.*"/>
    </def-cat>

    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="prpers">
      <cat-item lemma="prpers" tags="prn.*"/>
    </def-cat>

    <def-cat n="tn"><!--EO indefinits i companyia sense gènere al EO-->
      <cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>
      <cat-item tags="prn.tn.nt.*"/>
    </def-cat>

    <def-cat n="tn_itg_pos"><!--Aquí no hi entren els pronoms personals, caldrà fer-ne un xunc a part. -->
      <!--<cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>-->
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="pos"><!-- pel tagger-->
      <cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="proenc">
      <cat-item lemma="prpers" tags="prn.enc.*"/>
      <cat-item lemma="prpers" tags="prn.pro.*"/>
      <cat-item lemma="es" tags="prn.pro.*"/>
      <cat-item lemma="es" tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="profort"> <!-- ver regla PRO_FORT...-->
      <cat-item lemma="prpers_fort" tags="prn.pro.*"/>
    </def-cat>


    <def-cat n="relatiu"> <!-- EO-->
      <cat-item tags="prn.rel.*"/>
    </def-cat>

    <def-cat n="relatiu_prep"> <!-- EO-->
      <cat-item tags="rel.*"/>
    </def-cat>

    <def-cat n="enc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="pro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="verbnm_inf_ger"><!--verb no modal, infinitiu i gerundi -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbser.pron.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbhaver.pron.inf"/>
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbser.pron.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbhaver.pron.ger"/>
    </def-cat>

    <def-cat n="verbnm_imp"><!--verb no modal, imperatiu -->
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pron.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pron.imp.*"/>
    </def-cat>

    <def-cat n="verbm"><!--verb modal -->
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="inf_imp"><!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.imp.*"/>
    </def-cat>

    <def-cat n="verbm_inf_ger"><!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="haver">
      <cat-item tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="caldre">
      <cat-item lemma="caldre" tags="vbmod.*"/>
    </def-cat>

    <def-cat n="ser-pp">
      <cat-item lemma="ser" tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="copula">
      <cat-item lemma="ser" tags="vbser.*"/>
      <cat-item lemma="estar" tags="vblex.*"/>
      <cat-item lemma="semblar" tags="vblex.*"/>
      <cat-item lemma="parèixer" tags="vblex.*"/>
    </def-cat>

    <def-cat n="verb">
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="verbcj">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>


    <def-cat n="verbcj2">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
    </def-cat>

    <def-cat n="verbcjger"> 		<!-- verbcj + ger -->
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>

      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pron.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/><!--ATENCIÓ: CANVI -->
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.pron.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>


    <def-cat n="anar">
      <cat-item lemma="anar" tags="vblex.pri.*"/>
    </def-cat>

    <def-cat n="haveranar">
      <cat-item lemma="anar" tags="vblex.pri.*"/>
      <cat-item lemma="haver" tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="anar_a"> <!-- per a la perífrasi 'vaig a dormir' EO-->
      <cat-item lemma="anar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="preadv">
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="advment">
      <cat-item tags="adv.ment"/>
    </def-cat>

    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>

    <def-cat n="mes">
      <cat-item lemma="més" tags="adv"/>
      <cat-item lemma="més" tags="preadv"/>
      <cat-item lemma="més" tags="det.*"/><!-- pel tagger-->
      <cat-item lemma="menys" tags="adv"/>
      <cat-item lemma="menys" tags="preadv"/>
      <cat-item lemma="menys" tags="det.*"/><!-- pel tagger-->
    </def-cat>

    <def-cat n="mesde">
      <cat-item lemma="més de" tags="pr"/>
      <cat-item lemma="menys de" tags="pr"/>
    </def-cat>

    <def-cat n="tan">
      <cat-item lemma="tan" tags="adv"/>
    </def-cat>

    <def-cat n="millor">
      <cat-item lemma="millor" tags="adj.*"/>
      <cat-item lemma="pitjor" tags="adj.*"/>
      <cat-item lemma="major" tags="adj.*"/>
      <cat-item lemma="menor" tags="adj.*"/>
    </def-cat>

    <def-cat n="no">
      <cat-item lemma="no" tags="adv"/>
    </def-cat>

    <def-cat n="advneg">
      <cat-item lemma="mai" tags="adv"/>
      <cat-item lemma="enlloc" tags="adv"/>
      <cat-item lemma="gens" tags="adv"/>
    </def-cat>

    <def-cat n="pronneg">
      <cat-item lemma="res" tags="prn.*"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item lemma="i" tags="cnjcoo"/>
      <cat-item lemma="o" tags="cnjcoo"/>
      <cat-item lemma="però" tags="cnjcoo"/>
    </def-cat>

     <def-cat n="cnjcoopercorregir"> <!-- EO afegit per a corregir errors del tagger, veure regles-->
      <cat-item lemma="que" tags="cnjcoo"/> <!-- ara el tagger prioritza aquest-->
      <cat-item tags="cnjsub"/>
      <cat-item tags="prn.rel.*"/>
    </def-cat>

     <def-cat n="cnj">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

     <def-cat n="cnjcomp"><!-- regla adv adj cnjcopm-->
      <cat-item lemma="que" tags="cnjcoo"/>
      <cat-item lemma="que" tags="cnjsub"/>
      <cat-item lemma="que" tags="cnjadv"/>
    </def-cat>

    <def-cat n="forma_manera">
      <cat-item lemma="forma" tags="n.*"/>
      <cat-item lemma="manera" tags="n.*"/>
    </def-cat>

    <def-cat n="n_temps">
      <cat-item lemma="segon" tags="n.*"/>
      <cat-item lemma="minut" tags="n.*"/>
      <cat-item lemma="hora" tags="n.*"/>
      <cat-item lemma="dia" tags="n.*"/>
      <cat-item lemma="setmana" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*"/>
      <cat-item lemma="trimestre" tags="n.*"/>
      <cat-item lemma="semestre" tags="n.*"/>
      <cat-item lemma="any" tags="n.*"/>
      <cat-item lemma="dècada" tags="n.*"/>
      <cat-item lemma="segle" tags="n.*"/>
      <cat-item lemma="mil·leni" tags="n.*"/>
    </def-cat>

    <def-cat n="n_temps_pl">
      <cat-item lemma="segon" tags="n.*.pl"/>
      <cat-item lemma="minut" tags="n.*.pl"/>
      <cat-item lemma="hora" tags="n.*.pl"/>
      <cat-item lemma="dia" tags="n.*.pl"/>
      <cat-item lemma="setmana" tags="n.*.pl"/>
      <cat-item lemma="mes" tags="n.*.pl"/>
      <cat-item lemma="trimestre" tags="n.*.pl"/>
      <cat-item lemma="semestre" tags="n.*.pl"/>
      <cat-item lemma="any" tags="n.*.pl"/>
      <cat-item lemma="dècada" tags="n.*.pl"/>
      <cat-item lemma="segle" tags="n.*.pl"/>
      <cat-item lemma="mil·leni" tags="n.*.pl"/>
      <cat-item lemma="temps" tags="n.*"/> <!-- pot ser tbé singular -->
    </def-cat>

    <def-cat n="nom_da"> <!-- nomoj postulantaj "da" -->
      <cat-item lemma="parell" tags="n.*"/>
      <cat-item lemma="desena" tags="n.*"/>
      <cat-item lemma="dotzena" tags="n.*"/>
      <cat-item lemma="quinzena" tags="n.*"/>
      <cat-item lemma="vintena" tags="n.*"/>
      <cat-item lemma="trentena" tags="n.*"/>
      <cat-item lemma="quarantena" tags="n.*"/>
      <cat-item lemma="cinquantena" tags="n.*"/>
      <cat-item lemma="seixantena" tags="n.*"/>
      <cat-item lemma="setantena" tags="n.*"/>
      <cat-item lemma="vuitantena" tags="n.*"/>
      <cat-item lemma="norantena" tags="n.*"/>
      <cat-item lemma="centenar" tags="n.*"/>
      <cat-item lemma="miler" tags="n.*"/>
      <cat-item lemma="milió" tags="n.*"/>
      <cat-item lemma="miliard" tags="n.*"/>
      <cat-item lemma="bilió" tags="n.*"/>
      <cat-item lemma="quantitat" tags="n.*"/>
      <cat-item lemma="metre" tags="n.*"/>
      <cat-item lemma="decímetre" tags="n.*"/>
      <cat-item lemma="centímetre" tags="n.*"/>
      <cat-item lemma="mil·límetre" tags="n.*"/>
      <cat-item lemma="micra" tags="n.*"/>
      <cat-item lemma="decàmetre" tags="n.*"/>
      <cat-item lemma="hectòmetre" tags="n.*"/>
      <cat-item lemma="quilòmetre" tags="n.*"/>
      <cat-item lemma="milla" tags="n.*"/>
      <cat-item lemma="llegua" tags="n.*"/>
      <cat-item lemma="any-llum" tags="n.*"/>
      <cat-item lemma="parsec" tags="n.*"/>
      <cat-item lemma="megaparsec" tags="n.*"/>
      <cat-item lemma="hectàrea" tags="n.*"/>
      <cat-item lemma="litre" tags="n.*"/>
      <cat-item lemma="decilitre" tags="n.*"/>
      <cat-item lemma="centilitre" tags="n.*"/>
      <cat-item lemma="mil·lilitre" tags="n.*"/>
      <cat-item lemma="decalitre" tags="n.*"/>
      <cat-item lemma="hectolitre" tags="n.*"/>
      <cat-item lemma="gram" tags="n.*"/>
      <cat-item lemma="decigram" tags="n.*"/>
      <cat-item lemma="centigram" tags="n.*"/>
      <cat-item lemma="mil·ligram" tags="n.*"/>
      <cat-item lemma="decagram" tags="n.*"/>
      <cat-item lemma="hectogram" tags="n.*"/>
      <cat-item lemma="quilogram" tags="n.*"/>
      <cat-item lemma="quintar" tags="n.*"/>
      <cat-item lemma="tona" tags="n.*"/>
      <cat-item lemma="watt" tags="n.*"/>
      <cat-item lemma="quilowatt" tags="n.*"/>
      <cat-item lemma="megawatt" tags="n.*"/>
      <cat-item lemma="gigawatt" tags="n.*"/>
      <cat-item lemma="caloria" tags="n.*"/>
      <cat-item lemma="kilocaloria" tags="n.*"/>
      <cat-item lemma="bit" tags="n.*"/>
      <cat-item lemma="kilobit" tags="n.*"/>
      <cat-item lemma="megabit" tags="n.*"/>
      <cat-item lemma="byte" tags="n.*"/>
      <cat-item lemma="kilobyte" tags="n.*"/>
      <cat-item lemma="megabyte" tags="n.*"/>
      <cat-item lemma="gigabyte" tags="n.*"/>
      <cat-item lemma="terabyte" tags="n.*"/>
      <cat-item lemma="mes" tags="n.*.pl"/>
      <cat-item lemma="any" tags="n.*.pl"/>
      <cat-item lemma="dècada" tags="n.*.pl"/>
      <cat-item lemma="segle" tags="n.*.pl"/>
      <cat-item lemma="km²" tags="n.*"/>
      <cat-item lemma="m²" tags="n.*"/>
      <cat-item lemma="km" tags="n.*"/>
      <cat-item lemma="m" tags="n.*"/>
      <cat-item lemma="l" tags="n.*"/>
      <cat-item lemma="dl" tags="n.*"/>
      <cat-item lemma="cl" tags="n.*"/>
      <cat-item lemma="ml" tags="n.*"/>
      <cat-item lemma="kg" tags="n.*"/>
      <cat-item lemma="g" tags="n.*"/>
      <cat-item lemma="dg" tags="n.*"/>
      <cat-item lemma="cg" tags="n.*"/>
      <cat-item lemma="mg" tags="n.*"/>
      <cat-item lemma="W" tags="n.*"/>
      <cat-item lemma="kW" tags="n.*"/>
      <cat-item lemma="MW" tags="n.*"/>
      <cat-item lemma="b" tags="n.*"/>
      <cat-item lemma="kb" tags="n.*"/>
      <cat-item lemma="Mb" tags="n.*"/>
      <cat-item lemma="B" tags="n.*"/>
      <cat-item lemma="KB" tags="n.*"/>
      <cat-item lemma="MB" tags="n.*"/>
      <cat-item lemma="GB" tags="n.*"/>
      <cat-item lemma="TB" tags="n.*"/>
      <cat-item lemma="cal" tags="n.*"/>
      <cat-item lemma="kcal" tags="n.*"/>
    </def-cat>

    <def-cat n="nom_dist">
      <cat-item lemma="metre" tags="n.*"/>
      <cat-item lemma="decímetre" tags="n.*"/>
      <cat-item lemma="centímetre" tags="n.*"/>
      <cat-item lemma="mil·límetre" tags="n.*"/>
      <cat-item lemma="micra" tags="n.*"/>
      <cat-item lemma="decàmetre" tags="n.*"/>
      <cat-item lemma="hectòmetre" tags="n.*"/>
      <cat-item lemma="quilòmetre" tags="n.*"/>
      <cat-item lemma="milla" tags="n.*"/>
      <cat-item lemma="llegua" tags="n.*"/>
      <cat-item lemma="any-llum" tags="n.*"/>
      <cat-item lemma="parsec" tags="n.*"/>
      <cat-item lemma="megaparsec" tags="n.*"/>
      <cat-item lemma="altitud" tags="n.*"/>
    </def-cat>

    <def-cat n="per">
      <cat-item lemma="per" tags="pr"/>
    </def-cat>

    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>

    <def-cat n="a">
      <cat-item lemma="a" tags="pr"/>
    </def-cat>

    <def-cat n="estarapuntde"> <!--EO perífrasi-->
      <cat-item lemma="estar# a punt de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="acabarde"> <!--EO perífrasi-->
      <cat-item lemma="acabar# de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="deixarde"> <!--EO perífrasi-->
      <cat-item lemma="deixar# de" tags="vblex.*"/>
    </def-cat>

    <def-cat n="fer">
      <cat-item lemma="fer" tags="vblex.*"/>
    </def-cat>

    <def-cat n="fet"> <!-- EO "fakto" en comptes de "farita" -->
      <cat-item lemma="fer" tags="vblex.pp.m.sg"/>
    </def-cat>

    <def-cat n="tornara"> <!--EO perífrasi-->
      <cat-item lemma="tornar# a" tags="vblex.*"/>
    </def-cat>

    <def-cat n="parir_volar_creuar"> <!-- per desfer errors del lexer (tria enlloc de parèixer, voler, etc.) -->
      <cat-item lemma="parir" tags="vblex.*"/>
      <cat-item lemma="volar" tags="vblex.*"/>
      <cat-item lemma="creuar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="parir"> <!-- per desfer errors del lexer (tria enlloc de parèixer) -->
      <cat-item lemma="parir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="volar"> <!-- per desfer errors del lexer (tria enlloc de voler) -->
      <cat-item lemma="volar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="creuar"> <!-- per desfer errors del lexer (tria enlloc de creure) -->
      <cat-item lemma="creuar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="vol_creu"> <!-- per desfer errors del lexer (tria enlloc de voler, creure) -->
      <cat-item lemma="vol" tags="n.m.sg"/>
      <cat-item lemma="creu" tags="n.f.sg"/>
    </def-cat>
    <def-cat n="vol"> <!-- per desfer errors del lexer (tria enlloc de voler) -->
      <cat-item lemma="vol" tags="n.m.sg"/>
    </def-cat>
    <def-cat n="creu"> <!-- per desfer errors del lexer (tria enlloc de creure) -->
      <cat-item lemma="creu" tags="n.f.sg"/>
    </def-cat>

    <def-cat n="estar_pp">
      <cat-item lemma="estar" tags="vblex.pp"/>
    </def-cat>

    <def-cat n="estar"> <!--EO per a la perifrasi estar +  gerundi-->
      <cat-item lemma="estar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="continuar"> <!--EO per a la perifrasi continuar +  gerundi-->
      <cat-item lemma="continuar" tags="vblex.*"/>
      <cat-item lemma="seguir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="deure"> <!--EO per a la perifrasi deure +  infinitiu-->
      <cat-item lemma="deure" tags="vblex.*"/>
    </def-cat>

    <def-cat n="un_det">
      <cat-item lemma="un" tags="det.ind.*"/>
    </def-cat>

    <def-cat n="monato">
      <cat-item lemma="gener" tags="n.m.sg"/>
      <cat-item lemma="febrer" tags="n.m.sg"/>
      <cat-item lemma="març" tags="n.m.sg"/>
      <cat-item lemma="abril" tags="n.m.sg"/>
      <cat-item lemma="maig" tags="n.m.sg"/>
      <cat-item lemma="juny" tags="n.m.sg"/>
      <cat-item lemma="juliol" tags="n.m.sg"/>
      <cat-item lemma="agost" tags="n.m.sg"/>
      <cat-item lemma="setembre" tags="n.m.sg"/>
      <cat-item lemma="octubre" tags="n.m.sg"/>
      <cat-item lemma="novembre" tags="n.m.sg"/>
      <cat-item lemma="desembre" tags="n.m.sg"/>
    </def-cat>

  </section-def-cats>

  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.ant"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="adj.sint.comp"/>
      <attr-item tags="adj.sint.sup"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.geradj"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbser.geradj"/>
    </def-attr>

    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.ciph"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_verb2"> <!-- mirem si és pronominal a la macro tipus_verbs -->
      <attr-item tags="vblex"/>
      <attr-item tags="vblex.pron"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="pron">
      <attr-item tags="pron"/>
    </def-attr>

    <def-attr n="sep">
      <attr-item tags="sep"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.pron.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
      <attr-item tags="prn.pro"/>
      <attr-item tags="rel"/><!-- OJO -->
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="obj"/>
      <attr-item tags="tn"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
      <attr-item tags="ref"/>
      <attr-item tags="rel"/><!--EO-->
      <attr-item tags="nn"/><!--EO-->
      <attr-item tags="adv"/><!--EO-->
    </def-attr>
    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="cas"> <!--EO-->
      <attr-item tags="nom"/>
      <attr-item tags="nomi2"/>
      <attr-item tags="acc"/>
      <attr-item tags="sense"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
      <attr-item tags="GD"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fti"/>
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="prs"/>
      <attr-item tags="pres"/>
      <attr-item tags="past"/>

      <attr-item tags="pp"/><!-- ? -->
      <attr-item tags="pp2"/><!-- ? -->
      <attr-item tags="pp3"/><!-- ? -->
      <attr-item tags="ger"/><!-- ante -->
      <attr-item tags="gerpast"/><!-- inte -->
      <attr-item tags="inf"/><!-- ? -->

    </def-attr>



    <def-attr n="neg">
      <attr-item tags="NEG"/>
    </def-attr>

  </section-def-attrs>
  <section-def-vars>
    <def-var n="case"/>
    <def-var n="changecase"/>
    <def-var n="lemapos"/>
    <def-var n="nombre"/>
    <def-var n="genere"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="caseFirstWord"/>
    <def-var n="lema"/>
    <def-var n="EOS"/>
    <def-var n="SVnegatiu"/>
    <def-var n="auxiliar"/>
    <def-var n="tipus_verb"/>
    <def-var n="tipus_verb2"/>
    <def-var n="vegada"/>
    <def-var n="nprep"/>
    <def-var n="test"/>
  </section-def-vars>

  <section-def-lists>


  <def-list n="detsprep"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="pli da"/>
    <list-item v="iom da"/>
    <list-item v="la plimulto da"/>
    <list-item v="tro da"/>
    <list-item v="malpli da"/>
    <list-item v="ne multe da"/>
    <list-item v="sufiĉe da"/>
    <list-item v="ne multe da"/>
    <list-item v="tiom da"/>
    </def-list>

  <def-list n="qui"> <!-- BCN EO per marcar els que no poden anar en acc-->
    <list-item v="qui"/>
    </def-list>

  <def-list n="quin"> <!-- BCN EO per marcar els que han d'anar en acc (dets int preverbals)-->
    <list-item v="quin"/>
    </def-list>

  <def-list n="moviment"> <!-- BCN EO-->
    <list-item v="anar"/>
    <list-item v="afegir"/>
    <list-item v="posar"/>
    <list-item v="treure"/>
    <list-item v="traure"/>
    <list-item v="introduir"/>
    <list-item v="entrar"/>
    <list-item v="caure"/>
    <list-item v="pujar"/>
    <list-item v="creuar"/>
    <list-item v="relliscar"/>
    <list-item v="arribar"/>
    <list-item v="volar"/>
    <list-item v="córrer"/>
    <list-item v="caminar"/>
    <list-item v="avançar"/>
    <list-item v="sortir"/>
    <list-item v="eixir"/>
    <list-item v="traduir"/>
    <list-item v="inserir"/>
    <list-item v="posar"/>
    <list-item v="baixar"/>
    <list-item v="portar"/>
    <list-item v="atreure"/>
    <list-item v="atraure"/>
    <list-item v="dividir"/>
    </def-list>

  <def-list n="laqualcosa">
    <list-item v="la qual cosa"/>
    <list-item v="cosa que"/>
    </def-list>

  <def-list n="vegades"> <!-- per canviar "cop/colp/pic" a "vegada" -->
    <list-item v="vegada"/>
    <list-item v="cop"/>
    <list-item v="colp"/>
    <list-item v="pic"/>
    </def-list>

  <def-list n="agradar"> <!-- BCN EO per a la inversio argumental-->
    <list-item v="agradar"/>
    <list-item v="encantar"/>
    <list-item v="plaure"/>
    <list-item v="preocupar-se"/>
    <list-item v="interesar-se"/>
    <list-item v="inquietar-se"/>
    </def-list>

  <def-list n="volition"> <!-- BCN EO verbs que porten KE -->
    <list-item v="voler"/>
    <list-item v="proposar"/>
    <list-item v="exigir"/>
    <list-item v="reclamar"/>
    <list-item v="indicar"/>
    <list-item v="demanar"/>
    <list-item v="suggerir"/>
    <list-item v="caldre"/>
    <list-item v="caler"/>
    </def-list>

  <def-list n="reportingverb"> <!-- BCN EO verbs que porten KE (no s'utilitza)-->
    <list-item v="dir"/>
    <list-item v="admetre"/>
    <list-item v="acordar"/>
    <list-item v="decidir"/>
    <list-item v="negar"/>
    <list-item v="explicar"/>
    <list-item v="insistir"/>
    <list-item v="prometre"/>
    <list-item v="recomanar"/>
    <list-item v="suggerir"/>
    <list-item v="esmentar"/>
    <list-item v="pensar"/>
    <list-item v="creure"/>
    <list-item v="esperar"/>
    <list-item v="témer"/>
    <list-item v="suposar"/>
    <list-item v="significar"/>
  </def-list>

  </section-def-lists>


  <section-def-macros>

    <def-macro n="tipus_verbs" npar="1"> <!-- tots els verbs passen per aqui -->
      <choose>
        <when>
          <test>
          <in caseless="yes">
         <clip pos="1" side="sl" part="lemh"/>
         <list n="agradar"/>
          </in>
          </test>
          <let>
            <var n="tipus_verb"/>
            <lit-tag v="like"/>
          </let>
        </when>
	<when>
    	<test>
     	 <in caseless="yes">
       	  <clip pos="1" side="sl" part="lemh"/>
       	  <list n="moviment"/>
      	</in>
    	</test>
 	<let>
       <var n="tipus_verb"/>
       <lit-tag v="moviment"/>
       </let>
     </when>

    <when>
    <test>
      <in caseless="yes">
         <clip pos="1" side="sl" part="lemh"/>
         <list n="volition"/>
      </in>
    </test>
    <let>
     <var n="tipus_verb"/>
     <lit-tag v="volition"/>
     </let>
</when>

	<when>
    	<test>
      	<in caseless="yes">
        <clip pos="1" side="sl" part="lemh"/>
        <list n="reportingverb"/>
      	</in>
    	</test>
 		<let>
               <var n="tipus_verb"/>
               <lit-tag v="reportingverb"/>
                </let>
	</when>

        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="a_verb2"/>
              <lit-tag v="vblex.pron"/>
            </equal>
          </test>
          <let>
            <var n="tipus_verb2"/>
            <lit-tag v="pron"/>
          </let>
        </when>

        <otherwise>
          <let>
            <var n="tipus_verb"/>
                        <lit-tag v="res"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>




    <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc conté o no format. Cal posar aquesta funció en les regles en què desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si conté format cal conservar-la, si no en conté cal eliminar-la perquè no apareguin dos espais seguits. -->
      <choose>
	<when>
	  <test>
	    <not>
	      <equal>
		<b pos="1"/>
		<lit v=" "/>
	      </equal>
	    </not>
	  </test>
	  <out>
	    <b pos="1"/>
	  </out>
	</when>     	
      </choose>
    </def-macro>


    <def-macro n="default_nombro" npar="0"> <!-- ŝanĝas nombre al sg, se ĝi estas ND aŭ sp -->
      <choose>
	<when>
	  <test>
	    <or>
	      <equal>
	        <var n="nombre"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
	        <var n="nombre"/>
		<lit-tag v="sp"/>
	      </equal>
	      <equal>
	        <var n="nombre"/>
		<lit-tag v=""/>
	      </equal>
	    </or>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
      </choose>
    </def-macro>


    <def-macro n="nombro1" npar="1">
      <let>
	<var n="nombre"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <not>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v=""/>
	      </equal>
	    </not>
<!--
	    <or>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </or>
-->
	  </test>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
      </choose>
    </def-macro>

    <def-macro n="nombro2" npar="2">
	<!-- par1 = NOM (prioritata), par2 = DET/ADJ (malprioritata); eliro: nombre -->
	<!-- ĝi ŝanĝas <clip pos="1" side="tl" part="nbr"/> por eventuala konsulto en makrooj nombro3, 4 ktp. -->
      <let>
	<var n="nombre"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </equal>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <clip pos="2" side="tl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <or>
	        <equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
	        </equal>
	        <equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
	        </equal>
	      </or>
	      <or>
	        <equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="sg"/>
	        </equal>
	        <equal>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="pl"/>
	        </equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="nbr"/>
	    <clip pos="2" side="tl" part="nbr"/>
	  </let>
	  <let>
	    <var n="nombre"/>
	    <clip pos="2" side="tl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <or>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	    </or>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</otherwise>
      </choose>
    </def-macro>

    <def-macro n="nombro3" npar="3"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
    </def-macro>

    <def-macro n="nombro4" npar="4"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro3">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="4"/>
	</call-macro>
    </def-macro>

    <def-macro n="nombro5" npar="5"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro4">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="5"/>
	</call-macro>
    </def-macro>

    <def-macro n="nombro6" npar="6"> <!-- par1 = NOM (prioritata), parn = DET/ADJ (malprioritataj); eliro: nombre -->
	<call-macro n="nombro5">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	  <with-param pos="4"/>
	  <with-param pos="5"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="1"/>
	  <with-param pos="6"/>
	</call-macro>
    </def-macro>

    <def-macro n="nom_cas" npar="1"> <!-- EO: marca els SN que si són objecte estaran en accusatiu (les regles del t2x s'encarreguen; també marca els dets interrogatius 'quin' per a tractaclor al t2x)-->
	<choose>
  	<when>
    	<test>
	<or>
      	   <in caseless="yes">
         	<clip pos="1" side="tl" part="lem"/>
         	<list n="detsprep"/> <!-- llista de dets amb preposició (quantificadors) -->
      	   </in>
      	   <in caseless="yes">
         	<clip pos="1" side="sl" part="lem"/>
         	<list n="qui"/> <!-- per a pronoms  -->
      	   </in>
	</or>
    	</test>
      	<let>
		<var n="changecase"/>
		<lit-tag v="sense"/>
      	</let>
  	</when>

  	<when>
    	<test>
      	   <in caseless="yes">
         	<clip pos="1" side="sl" part="lem"/>
         	<list n="quin"/> <!-- per a determinats interrogatius (van davant del verb) -->
      	   </in>
    	</test>
      	<let>
		<var n="changecase"/>
		<lit-tag v="nomi2"/>
      	</let>
  	</when>
  	<otherwise>
      	<let>
		<var n="changecase"/>
		<lit-tag v="nom"/>
      	</let>
  	</otherwise>
	</choose>
      	<let>
		<var n="case"/>
		<lit-tag v="nom"/>
      	</let>
    </def-macro>

    <def-macro n="nombre_nom" npar="1">
      <let>
	<var n="nombre"/>
	<lit v=""/>
      </let>
      <choose>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="pl"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="nombre"/>
	    <lit-tag v="sg_slpl"/>
	  </let>
	</when>
       <when>
	<test>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
          </test>
          <let>
            <var n="nombre"/>
            <lit-tag v="sg"/>
          </let>
        </when>

	<otherwise>
	  <let>
	    <var n="nombre"/>
	    <clip pos="1" side="tl" part="nbr"/>
	  </let>
	</otherwise>
      </choose>
    </def-macro>


    <def-macro n="firstWord" npar="1">
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="sl" part="a_np_acr"/>
	      <lit v=""/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <var n="EOS"/>
		  <lit v="true"/>
		</equal>
	      </test>
	      <modify-case>
		<clip pos="1" side="tl" part="lem"/>
		<lit v="aa"/>
	      </modify-case>
	      <let>
		<var n="caseFirstWord"/>
		<lit v="Aa"/>
	      </let>
	    </when>
	  </choose>
	</when>
	<otherwise>
	  <let>
	    <var n="caseFirstWord"/>
	    <lit v="aa"/>
	  </let>
	</otherwise>
      </choose>
      <let>
	<var n="EOS"/>
	<lit v="false"/>
      </let>
    </def-macro>

    <def-macro n="m_parir_volar_creuar" npar="1">
	<choose>
              <when>
                <test>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="parir"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit v="ŝajni"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <lit-tag v="vbser"/>
                </let>
              </when>
              <when>
                <test>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="volar"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit v="voli"/>
                </let>
              </when>
              <when>
                <test>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="creuar"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit v="kredi"/>
                </let>
              </when>
	</choose>
    </def-macro>


    <def-macro n="m_vol_creu" npar="1">
	<choose>
              <when>
                <test>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="vol"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit v="voli"/>
                </let>
              </when>
              <when>
                <test>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="creu"/>
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit v="kredi"/>
                </let>
              </when>
	</choose>
    </def-macro>


    <!-- Sxangxas la genron de vorto: Se la genro estas nekonata "GD" gxi estas sxangxata al vira genro -->
    <def-macro n="ordigu_genron" npar="1">
      <choose>
        <when>
          <test>
            <equal caseless="yes"><clip pos="1" side="tl" part="gen"/><lit-tag v="GD"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="gen"/><lit-tag v="m"/></let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="set_temps" npar="1">
        <choose>
              <when>  <!-- traduccions a present -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pres"/> <!-- present -->
                </let>
              </when>
              <when>           <!-- traduccions a passat -->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
              </when>

              <when>           <!-- traduccions a futur -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
              </when>

              <when>           <!-- traduccions a condicional -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
              </when>

              <when>           <!-- traduccions a gerundi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="ger"/>
                </let>
              </when>
            </choose>
    </def-macro>

    <def-macro n="set_temps2" npar="2">
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
		  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!--digué -->
                    </equal>
		</or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>
    </def-macro>

<def-macro n="pli_plej" npar="1">
   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="més"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="menys"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="malplej"/>
          </let>
        </when>
   </choose>
</def-macro>

<def-macro n="pli_plej2" npar="1">
   <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="millor"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej bona"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="pitjor"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej malbona"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="major"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej granda"/>
          </let>
        </when>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="menor"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="plej malgranda"/>
          </let>
        </when>
   </choose>
</def-macro>



  </section-def-macros>

  <section-rules>




<!--******** REGLES DE SN ******************************************** -->

<rule comment="REGLA: NOM (per a col·locar la cua en les multiparaules amb g (EO)">
      <pattern>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   <!--<clip pos="1" side="tl" part="whole"/> Per a compostos: -->
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOMda DE (milió de -> miliono da)">
      <pattern>
	<pattern-item n="nom_da"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
        <let><var n="nprep"/><clip pos="2" side="tl" part="lem"/></let>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   <!--<clip pos="1" side="tl" part="whole"/> Per a compostos: -->
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
 	  <b pos="1"/>
	  <chunk name="da">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="da"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NUM NOMda DE (15 millons de -> 15 milionoj da)">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom_da"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="2"/>
          <chunk name="da">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="da"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: A NUM NOMdist DE (a 15 quilòmetres de -> je 15 kilometroj el)">
      <pattern>
        <pattern-item n="a"/>
        <pattern-item n="num"/>
        <pattern-item n="nom_dist"/>
        <pattern-item n="de"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nombro2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="je">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="je"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
           <b pos="1"/>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="3"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
           <b pos="3"/>
          <chunk name="el">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <lit v="el"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="REGLA: ANTROPÒNIM (Joan)">
      <pattern>
	<pattern-item n="ant"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="1" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="ant" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART ANTROPÒNIM (La Maria - Maria; s'elimina l'article)">
      <pattern>
	<pattern-item n="def"/>
	<pattern-item n="ant"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="ant" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART TOPÒNIM (els Pirineus - Pireneoj; s'elimina l'article)">
      <pattern>
	<pattern-item n="def"/>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="np"/>
	      <lit-tag v="loc"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: A TOPÒNIM (a Barcelona - en Barcelono; es canvia la preposició)">
      <pattern>
	<pattern-item n="a"/>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="en" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="en"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="nom">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><lit-tag v="m"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="np"/>
	      <lit-tag v="loc"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: A DET TOPÒNIM (als Pirineus - en Pireneoj; es canvia la preposició i s'elimina l'article)">
      <pattern>
	<pattern-item n="a"/>
	<pattern-item n="def"/>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="3" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="en" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="en"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="nom">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit-tag v="np"/>
	      <lit-tag v="loc"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: TOT TOPÒNIM (tot Europa -> la tuta Eŭropo [correcció de tot = prn])">
      <pattern>
	<pattern-item n="tn"/>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="2" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <lit v="la tuta"/>
	      <lit-tag v="det"/>
	      <lit-tag v="ind"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <lit-tag v="np"/>
	      <lit-tag v="loc"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: A TOT TOPÒNIM (a tot Europa -> en la tuta Eŭropo [correcció de tot = prn])">
      <pattern>
	<pattern-item n="a"/>
	<pattern-item n="tn"/>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="nombre"/>
	  <clip pos="3" side="tl" part="nbr"/>
	</let>
	<out>
	  <chunk name="en" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="en"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="det_nom">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	      <tag><lit-tag v="nom"/></tag>
	    </tags>
	    <lu>
	      <lit v="la tuta"/>
	      <lit-tag v="det"/>
	      <lit-tag v="ind"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <lit-tag v="np"/>
	      <lit-tag v="loc"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<!-- KOMENCO DATOJ -->

<rule comment="REGLA: NUM-NUM DE MES (2-3 de juliol -> 2an-3an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
	<pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: NUM-NUM DE MES DE ANY (2-3 de juliol de 1930 -> 2an-3an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
	<pattern-item n="guio"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="5"/>
            <lu>
	      <clip pos="7" side="tl" part="lem"/>
	      <clip pos="7" side="tl" part="a_num"/>
	      <clip pos="7" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: NUM DE MES (2 de juliol -> 2an de julio)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: DET NUM DE MES (el 2 de juliol -> la 2an de julio)">
      <pattern>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: NUM DE MES DE ANY (2 de juliol de 1930 -> 2an de julio 1930)">
      <pattern>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="4"/>
            <lu>
	      <clip pos="5" side="tl" part="lem"/>
	      <clip pos="5" side="tl" part="a_num"/>
	      <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: DET NUM DE MES DE ANY (el 2 de juliol de 1930 -> la 2an de julio de 1930)">
      <pattern>
        <pattern-item n="el_det_ms"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="dato" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.m.sg.acc.acc"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="5"/>
            <lu>
	      <clip pos="6" side="tl" part="lem"/>
	      <clip pos="6" side="tl" part="a_num"/>
	      <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: PREP NUM DE MES (de 2 de juliol -> de 2a de julio)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
	  <chunk namefrom="nprep" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: PREP NUM DE MES DE ANY (de 2 de juliol de 1930 -> de 2a de julio 1930)">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="num_dato"/>
        <pattern-item n="de"/>
        <pattern-item n="monato"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
	  <chunk namefrom="nprep" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
          <b pos="1"/>
          <chunk name="dato">
            <tags>
              <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/><lit v="a"/>
              <lit-tag v="adj"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="n"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
            <b pos="5"/>
            <lu>
	      <clip pos="6" side="tl" part="lem"/>
	      <clip pos="6" side="tl" part="a_num"/>
	      <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<!-- FINO KOMENCO DATOJ -->

<!-- no activo perquè caldria fer el tractament dels adjectius "més cases boniques"
    <rule comment="REGLA: més NOM, 'més cases' -> 'pli da domoj'">
      <pattern>
        <pattern-item n="mes"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord"><with-param pos="1"/></call-macro>
        <call-macro n="ordigu_genron"><with-param pos="2"/></call-macro>
            <out>
              <chunk name="more_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.m.sg.nom.nom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                  <lit v="pli da"/>
                  <lit-tag v="det"/>
                  <lit-tag v="qnt"/>
                  <lit-tag v="sg"/>
                  <lit-tag v="nom"/>
                </lu>
            <b pos="2"/>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                  <lit-tag v="nom"/>
                </lu>
              </chunk>
            </out>
      </action>
    </rule>
-->




<rule comment="REGLA: ART NOM més ADJ (EO, més -> plej ex: la casa més gran -> la plej granda domo)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="nom"/>
	<pattern-item n="mes"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: ART més ADJ (EO, més -> plej ex: la més gran -> la plej granda)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mes"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	  </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART NOM més ADJ de (EOes, más -> plej ex: la casa más grande de -> la plej granda domo el)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="nom"/>
	<pattern-item n="mes"/>
	<pattern-item n="adj"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr" link-to="3"/>
              <lit-tag v="4"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="4"/>
	  <chunk name="el">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: ART més ADJ de (EOes, más -> plej ex: la más grande de -> la plej granda el)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="mes"/>
	<pattern-item n="adj"/>
	<pattern-item n="de"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
          <b pos="3"/>
	  <chunk name="el">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ART millor (EOes, más -> plej ex: la mejor -> la plej bona)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="millor"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
            </lu>
	  </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM (EO ex. els llibres, les cases -> la libroj, la domoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcert"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalgun"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!-- altres (amb cas)-->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM (EO, ex. les dues, aquests tres -> la du, ĉi tiuj tri)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM (EO, ex. les dues noies, aquests tres llibres -> la du knabinoj, ĉi tiuj tri libroj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADJ NOM (EO, ex. les dues últimes noies, aquests tres últims llibres -> la du lastaj knabinoj, ĉi tiuj tri lastaj libroj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="4" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="4" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADJ NOM ADJ (EO, ex. els tres últims corrents polítics -> la tri lastaj politikaj kurentoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="4" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="4" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADJ ADJ NOM (EO, ex. aquests tres últims grans llibres -> ĉi tiuj tri lastaj grandaj libroj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="5" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="5" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADV ADJ NOM (EO, ex. els tres més grans llibres -> la tri plej grandaj libroj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="5" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="5" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM ADV ADJ NOM ADJ (EO, ex. els tres més grans llibres infantils -> la tri plej grandaj infanaj libroj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="5" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="5" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM (EO, tots els nois -> ĉiuj knaboj; la majoria dels nois -> la plimulto da knaboj)">
      <pattern>
	<pattern-item n="qnt"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratius i altres -->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ NOM (EO) grans persones -> grandaj homoj">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADV ADJ NOM (EO) molt grans persones -> tre grandaj homoj">
      <pattern>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADV ADJ NOM ADJ (EO) molt diferents tendències socialistes -> tre malsamaj socialismaj tendencoj">
      <pattern>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ ADJ NOM (EO) primer gran concert -> unua granda concerto ">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ ADJ NOM ADJ (EO) primer gran concert públic -> unua granda publika concerto">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ conj ADJ NOM (EO) primer i darrer concert -> unua kaj lasta koncerto">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="4"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="tags"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ conj ADJ NOM ADJ (EO) primer i darrer concert públic -> unua kaj lasta publika koncerto">
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="4"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="tags"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM (EO) el mateix noi; una gran persona -> la sama knabo, granda homo">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADV ADJ NOM (EO) la plus grande variété -> la plej granda vario">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>
     </when>
   </choose>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADV ADJ NOM ADJ (EO) la plus grande variété animale -> la plej granda besta vario">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
	<call-macro n="pli_plej">
	  <with-param pos="2"/>
	</call-macro>
     </when>
   </choose>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADJ NOM (EO) el primer gran concert -> la unua granda concerto">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADJ NOM ADJ (EO) el primer gran concert públic -> la unua granda publika koncerto">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="4" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADV ADJ NOM (EO) el tercer més gran concert -> la tria plej granda concerto">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ ADV ADJ NOM ADJ (EO) el tercer més gran grup bancari -> la tria plej granda banka grupo">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ NOM (EO) el primer i darrer concert -> la unua kaj lasta concerto">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ NOM ADJ (EO) el primer i darrer concert públic -> la unua kaj lasta publika concerto">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="5"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="5" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ ADJ NOM (EO) el primer i darrer gran concert -> la unua kaj lasta granda concerto">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="6"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="6"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="6" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="6" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ conj ADJ ADJ NOM ADJ (EO) el primer i darrer gran concert públic -> la unua kaj lasta granda publika concerto">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="6"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj3" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="6" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="6"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="6" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="tags"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="6"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_nom"/>
	      <clip pos="6" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ (EO, aquella casa gran, un llibre interessant, alguns cotxes verds -> tiu granda domo, interesa libro, iuj verdaj auxtoj)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM-NOM ADJ (EO, aquella ciutat-jardí moderna -> tiu moderna urbo-ĝardeno, per evitar *tiu urbo-moderna ĝardeno)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="5"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-ADJ (EO, aquella classe mitjana-alta -> tiu meza-alta klaso, per evitar *tiu meza klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ ADJ-ADJ (EO, aquella classe social mitjana-alta -> tiu meza-alta socia klaso, per evitar *tiu meza socia klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-ADJ-ADJ (EO, el diccionari català-valencià-balear -> la kataluna-valencia-baleara vortaro, per evitar *la kataluna-valencia vortaro-baleara)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="whole"/>
	    </lu>
	    <b pos="6"/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="whole"/>
	    </lu>
	    <b pos="6"/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-UNK (EO, aquella classe mitjana-alta -> tiu meza-alta klaso, per evitar *tiu meza klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ ADJ-UNK (EO, aquella classe social mitjana-alta -> tiu meza-alta socia klaso, per evitar *tiu meza socia klaso-alta)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro3">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ-ADJ-UNK (EO, el diccionari català-valencià-balear -> la kataluna-valencia-baleara vortaro, per evitar *la kataluna-valencia vortaro-baleara)">
<!-- amb <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj">
- s'evita la inversió del participi per evitar problemes com: aquella casa construïda pel meu pare -> tiu konstruita domo por mia patro
- però es perd la generació de l'acusatiu
Es podria generar una regla semblant amb <pattern-item n="pp"> però llavors es perd la regla pp + POR -> pp + DE
i prefereixo que no passi (solucionar aquest segon problema condueix a una nova inflació de regles)
-->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="whole"/>
	    </lu>
	    <b pos="6"/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="whole"/>
	    </lu>
	    <b pos="6"/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADJ (EO, ex. aquelles tres cases blanques, els tres llibres interessants, aquests dos cotxes verds -> tiuj tri blankaj domoj, la tri interesaj libroj, ĉi tiuj du verdaj auxtoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="4"/>
	</call-macro>
	<out>
	  <chunk name="det_num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM ADJ (EO, ex. tots els cotxes blancs -> ĉiuj blankaj auxtoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="qnt"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratiu (dividim el SN en tot/ĉiu + PP(le ...)-->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="el">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="det_nom_adj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADV ADJ (EO, una noia molt maca; una noia increïblement maca -> tre bela knabino; nekredeble bela knabino - mantenim l'ordre perquè en comparacions hi ha a vegades problemes: una estrella deu vegades més pesada -> #stelo dek pli peza fojoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>

	<out>
	  <chunk name="nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
  </when>
  <otherwise>
	<call-macro n="pli_plej">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADV ADJ (EO, ex. les dues cases tan grans -> la du domoj tiel grandaj - mantenim l'ordre perquè en comparacions hi ha a vegades problemes: una altra deu vegades més pesada -> #alia dek pli peza fojoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    <b pos="2"/>
            <lu>
               <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej">
	  <with-param pos="4"/>
	</call-macro>
	<out>
	  <chunk name="det_num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADV ADJ conj ADJ (EO, una noia molt maca i simpàtica ; una noia increïblement maca i simpàtica -> tre bela kaj simpatia knabino; nekredeble bela kaj simpatia knabino)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>

	<out>
	  <chunk name="nom_adv_adj_coo_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
  </when>
  <otherwise>
	<out>
	  <chunk name="det_nom_adv_adj_coo_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="5" side="tl" part="whole"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ conj ADJ (EO, coordinació d'adjectius modificant el mateix nom, ex. una dona alta i prima -> alta kaj maldika virino)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	    <out>
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/>
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="5" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out>
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/>
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="5" side="tl" part="lemq"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ conj ADJ (EO, coordinació d'ajectius)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	    <out>
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_det"/>
              	<clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="4"/>
            	</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="6" side="tl" part="lemh"/>
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="6" side="tl" part="lemq"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out>
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_det"/>
              	<clip pos="2" side="tl" part="nbr"/>
            	</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="6" side="tl" part="lemh"/>
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="6" side="tl" part="lemq"/>
		</lu>
		<b pos="5"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<!--
x- feia més mal que bé (esp. per a casos com DET NOM DE NOM ADJ ADJ i sim.) x-
x- havia perdut el seu sentit en eliminar les regles de composició de NOM DE NOM x-
<rule comment="REGLA: DET NOM DE NOM ADJ (EO)(pertany a les regles de formació de compostos a partir de  N+de+N, en aquest cas NO volem que faci el compost, ex. els animals de zones càlides-> la besto de varmaj zonoj)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!x- assigna cas nominatiu per defecte x->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!x- article indefinit s'elimina x->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcert"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalgun"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
	 </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
	    <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	  </chunk>
	    <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!x- altres (amb cas)x->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
            <b pos="1"/>

            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
	    </chunk>
	    <b pos="2"/>
            <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
	    <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    </chunk>
	    <b pos="3"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
-->

<!--
x- feia més mal que bé x-
x- canvio els comentaris interiors per x- en comptes de doble guió per qüestions sintàctiques x-
<rule comment="REGLA: DET NOM DE NOM (EO)(pertany a les regles de formació de compostos a partir de  N+de+N, ex. un llibre de consulta -> konsultolibro)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!x- assigna cas nominatiu per defecte x->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!x- article indefinit s'elimina x->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcert"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalgun"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <!x-<b pos="1"/> de fet formem un compostx->
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!x- altres (amb cas)x->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
 <!x-           <b pos="2"/>x->
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM DE NOM ADJ (EO)(pertany a les regles de formació de compostos a partir de  N+de+N, en aquest cas NO volem que faci el compost)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article indefinit s'eliminax->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- article definitx->
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM DE NOM (EO)(pertany a les regles de formació de compostos a partir de  N+de+N)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article indefinit s'eliminax->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <!x-<b pos="2"/>x->
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- article definitx->
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="3"/>x->
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM DE NOM ADJ (EO)(pertany a les regles de formació de compostos a partir de  N+de+N, en aquest cas NO volem que faci el compost)">
      <pattern>
	<pattern-item n="qnt"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinojx->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
	    </chunk>
	    <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- demostratius i altres x->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    </chunk>
            <b pos="1"/>
         <chunk name="de">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
            <b pos="2"/>
         <chunk name="nom_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
<rule comment="REGLA: QNT DET NOM DE NOM (EO)(pertany a les regles de formació de compostos a partir de  N+de+N)">
      <pattern>
	<pattern-item n="qnt"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!x- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinojx->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <!x-<b pos="2"/>x->
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!x- demostratius i altres x->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="3"/>x->
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM DE NOM (EO) (pertany a les regles de formació de compostos a partir de  N+de+N)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="de"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!x- article indefinit s'eliminax->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="2"/>x->
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!x- article definitx->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen"/>
	      <lit-tag v="sg"/> <!x- no volem que canvii el nbr, de fet passa a formar part d'un compostx->
	      <lit-tag v="nom"/> <!x- no volem que canvii el cas, de fet passa a formar part d'un compostx->
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <!x-<b pos="3"/>x->
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
-->

<rule comment="REGLA: NOM-NOM ADJ (EO, ciutat-jardí moderna -> moderna urbo-ĝardeno, per evitar *urbo-moderna ĝardeno)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="guio"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-ADJ (EO, classe mitjana-alta -> meza-alta klaso, per evitar *meza klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ ADJ-ADJ (EO, classe social mitjana-alta -> meza-alta socia klaso, per evitar *meza socia klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-ADJ-ADJ (EO, diccionari català-valencià-balear -> kataluna-valencia-baleara vortaro, per evitar *kataluna-valencia vortaro-baleara)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-UNK (EO, classe mitjana-alta -> meza-alta klaso, per evitar *meza klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ ADJ-UNK (EO, classe social mitjana-alta -> meza-alta socia klaso, per evitar *meza socia klaso-alta)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro3">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ-ADJ-UNK (EO, diccionari català-valencià-balear -> kataluna-valencia-baleara vortaro, per evitar *kataluna-valencia vortaro-baleara)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: NOM ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ ADJ (la Federació Anarquista Ibèrica -> la Iberia Anarkiisma Federacio)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ ADV ADJ (una pressió fiscal molt baixa -> tre malalta fiska premo)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="tags"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej">
	  <with-param pos="4"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="tags"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM ADJ (el gran parc industrial -> la granda industria parko)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJ NOM ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ I ADJ (EO, sintagmes nominals sense especificadors)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj_i_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ ADJ ADJ (EO, sintagmes nominals sense especificadors)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ ADJ ADJ (les primeres eleccions municipals democràtiques -> la unuaj demokratiaj urbaj elektoj">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ, ADJ I ADJ (els escriptors catalans, gallecs i bascos -> la katalunaj, galegaj kaj eŭskaj verkistoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <clip pos="6" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ, ADJ I ADJ (els escriptors catalans, gallecs i bascos -> la katalunaj, galegaj kaj eŭskaj verkistoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <clip pos="7" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: NOM ADJ, ADJ, ADJ I ADJ (soldats soviétiques, américains, britanniques et français -> sovetiaj, usonaj, britaj kaj francaj soldatoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro5">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	  <with-param pos="6"/>
	  <with-param pos="8"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="nom_adj_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="8" side="tl" part="lemh"/>
	      <clip pos="8" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="8" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADJ, ADJ, ADJ I ADJ (les soldats soviétiques, américains, britanniques et français -> la sovetiaj, usonaj, britaj kaj francaj soldatoj)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="sent_coma"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro6">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	  <with-param pos="5"/>
	  <with-param pos="7"/>
	  <with-param pos="9"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="9" side="tl" part="lemh"/>
	      <clip pos="9" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="9" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="7" side="tl" part="lemh"/>
	      <clip pos="7" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="7" side="tl" part="lemq"/>
	    </lu>
	    <b/>
            <lu>
              <clip pos="8" side="tl" part="whole"/>
            </lu>
	    <b/>
	    <lu>
	      <clip pos="9" side="tl" part="lemh"/>
	      <clip pos="9" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="9" side="tl" part="lemq"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET ADJ NOM ADJ ADJ (la primera revista literària flamenca -> la unua flandra literatura revuo)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET ADJ NOM ADJ-ADJ (la deuxième guerre Anglo-néerlandaise -> la dua angla-flandra milito)">
<!-- sobre <pattern-item n="adjADJ"/> en comptes de <pattern-item n="adj"> veure comentari per a la regla DET NOM ADJ -->
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adj"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="guio"/>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro4">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="6"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
	    <b pos="5"/>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_adj"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



<rule comment="vol + QUE (vol (n) = voli EOes)">
      <pattern>
	<pattern-item n="vol_creu"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="m_vol_creu">
	  <with-param pos="1"/>
	</call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="pri"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="vblex"/>
                      <lit-tag v="pres"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="REGLA: NOM QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>   <!--<clip pos="1" side="tl" part="whole"/> Per a compostos: -->
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="1" side="tl" part="nbr"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



<rule comment="REGLA: COMA QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="sent_coma"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <let><var n="case"/><lit-tag v="nom"/></let>

	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="2" side="sl" part="lem"/>
       	  <list n="laqualcosa"/>
      	</in>
      </test>
        <let><clip pos="2" side="tl" part="lem"/><lit v="kio"/></let>
     </when>
     <otherwise>
        <let><clip pos="2" side="tl" part="lem"/><lit v="kiu"/></let>
     </otherwise>
   </choose>

   <choose>
     <when>
      <test>
       <equal>
        <clip pos="2" side="sl" part="nbr"/>
        <lit-tag v="pl"/>
        </equal>
      </test>
        <let><var n="nombre"/><lit-tag v="pl"/></let>
     </when>
     <otherwise>
        <let><var n="nombre"/><lit-tag v="sg"/></let>
     </otherwise>
   </choose>

	<out>
          <chunk name="cm">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>

                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <var n="nombre"/>
                        <lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	 <call-macro n="nom_cas"> <!-- assigna cas nominatiu per defecte -->
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>

   <choose>
     <when>   <!-- article indefinit s'elimina -->
      <test>
       <or>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXcert"/>
        </equal>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="XXalgun"/>
        </equal>
       </or>
      </test>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>

<otherwise>           <!-- altres (amb cas)-->

	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<out>
                <b pos="1"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
	                <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
              		<clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM QUE (EO regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>-->

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
		<out>
                <b pos="3"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>

	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



<rule comment="REGLA: QNT DET NOM QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
	<pattern-item n="qnt"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratius i altres -->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<out>
                <b pos="3"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<out>
                <b pos="3"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADJ QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu'  )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<call-macro n="pli_plej2">
	  <with-param pos="4"/>
	</call-macro>
	<out>
	  <chunk name="det_num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<out>
                <b pos="4"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: QNT DET NOM ADJ QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
	<pattern-item n="qnt"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <!-- article definit s'elimina i es 'genera' cas: 'totes les nenes : ĉiuj knabinoj-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="2" side="sl" part="lem"/>
        <lit v="el"/>
        </equal>
      </test>
        <out>
          <chunk name="ĉiu_nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
            </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- demostratiu (dividim el SN en tot/ĉiu + PP(le ...)-->
	<out>
	  <chunk name="ĉiunom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="el">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <lit v="el"/>
	      <lit-tag v="pr"/>
	    </lu>
	  </chunk>
 	    <b/>
	  <chunk name="det_nom_adj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<out>
                <b pos="4"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NOM ADV ADJ QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu')">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<!--<call-macro n="canvia_det">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>-->

   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>

	<out>
	  <chunk name="nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
  </when>
  <otherwise>
	<out>
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
     </otherwise>
      </choose>
	<out>
                <b pos="4"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NUM NOM ADV ADJ QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
        <pattern-item n="preadv"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
            </tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
	    <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
    </when>
<otherwise>           <!-- article definit-->
	<out>
	  <chunk name="det_num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="3" side="sl" part="gen"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	    <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
	    <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="nbr"/>
              <lit-tag v="4"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen"/>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>	
     </otherwise>
      </choose>
	<out>
                <b pos="5"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="3" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	</out>	
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DET NOM ADJ conj ADJ QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
   <!-- article indefinit s'elimina-->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	    <out>
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/>
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="5" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out>
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_adj"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/>
		  <clip pos="5" side="tl" part="a_adj"/>
		  <clip pos="5" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="5" side="tl" part="lemq"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<out>
                <b pos="5"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: DET NUM NOM ADJ conj ADJ QUE (EO, regles específiques de SN amb causula de relatiu, creades per a corregir el tagger 'que -> kiu' )">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>		
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	

   <choose>
     <when>
      <test>
     	 <in caseless="yes">
       	  <clip pos="3" side="sl" part="lemh"/>
       	  <list n="vegades"/>
      	</in>
      </test>
          <let><clip pos="3" side="tl" part="lemh"/><lit v="fojo"/></let>
     </when>
   </choose>

   <!-- article indefinit té valor d'aproximació -->
   <choose>
     <when>
      <test>
       <equal caseless="yes">
        <clip pos="1" side="sl" part="lem"/>
        <lit v="un"/>
        </equal>
      </test>
	    <out>
	      <chunk name="nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
            <lu>
              <lit v="ĉirkaŭ"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_det"/>
              	<clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="4"/>
            	</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="6" side="tl" part="lemh"/>
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="6" side="tl" part="lemq"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
</when>
<otherwise>           <!-- article definit-->
	    <out>
	      <chunk name="det_nom_adj_coo_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><clip pos="3" side="sl" part="gen"/></tag>
		  <tag><var n="nombre"/></tag>
		  <tag><var n="case"/></tag>
		  <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lem"/>
		  <clip pos="1" side="tl" part="a_det"/>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		</lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_det"/>
              	<clip pos="2" side="tl" part="nbr"/>
            	</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_adj"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="5" side="tl" part="whole"/>
		</lu>
		<b pos="4"/>
		<lu>
		  <clip pos="6" side="tl" part="lemh"/>
		  <clip pos="6" side="tl" part="a_adj"/>
		  <clip pos="6" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="6" side="tl" part="lemq"/>
		</lu>
		<b pos="5"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
     </otherwise>
      </choose>
	<out>
                <b pos="6"/>
                 <chunk name="relatiu">
                        <tags>
                        <tag><lit-tag v="SNrelatiu"/></tag>
                        <tag><var n="case"/></tag>
                        </tags>
                        <lu>
                        <lit v="kiu"/>
                        <lit-tag v="prn"/>
                        <lit-tag v="rel"/>
                        <clip pos="2" side="tl" part="nbr"/>
              		<lit-tag v="2"/>
                        </lu>
                        </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda) (EO)">
      <pattern>
	<pattern-item n="adjADJ"/>
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	

	<out>
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="REGLA: ADV ADJECTIU ('molt/poc/gens/bastant/força/increïblement gran - ') (EO)">
      <pattern>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>	
	    <out>
	      <chunk name="adv_adj" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
	          <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: MÉS ADJECTIU QUE ('més/menys gran que - ') (EO)">
      <pattern>
	<pattern-item n="mes"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcomp"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adj_comparatiu" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
	          <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
              		<lit v="ol"/>
			<lit-tag v="cnjcoo"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: MÉS ADV QUE ('més/menys alegrament que - ') (EO)">
      <pattern>
	<pattern-item n="mes"/>
	<pattern-item n="adv"/>
	<pattern-item n="cnjcomp"/>
      </pattern>
      <action>          	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="adv"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_adv"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
              		<lit v="ol"/>
			<lit-tag v="cnjcoo"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="REGLA: MAJOR QUE ('mayor/menor que - pli granda/pli malgranda ol') (EOes)">
      <pattern>
	<pattern-item n="millor"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adj_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SA"/></tag>
	           <tag><clip pos="1" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_adj"/>
	          <clip pos="1" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: MAJOR NOM QUE ('mayor/menor libertad que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
	<pattern-item n="millor"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_adj"/>
	          <clip pos="1" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
	          <clip pos="2" side="tl" part="lemh"/>
	          <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
	          <clip pos="2" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	          <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: MAJOR NOM ADJ QUE ('mayor/menor libertad individual que - pli granda/pli malgranda libereco ol') (EOes)">
      <pattern>
	<pattern-item n="millor"/>
	<pattern-item n="nom"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="tl" part="a_adj"/>
	          <clip pos="1" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_adj"/>
	          <clip pos="3" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
		<lu>
	          <clip pos="2" side="tl" part="lemh"/>
	          <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
	          <clip pos="2" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	          <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: EL MAJOR ('el mayor/menor - la plej granda/plej malgranda') (EOes)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="millor"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_adj_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SA"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
	        <lu>
	          <clip pos="1" side="tl" part="lem"/>
	          <clip pos="1" side="tl" part="a_det"/>
	          <clip pos="1" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	        </lu>
                <b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: EL MAJOR DE ('el mayor/menor de - la plej granda/plej malgranda el') (EOes)">
      <pattern>
	<pattern-item n="el"/>
	<pattern-item n="millor"/>
	<pattern-item n="de"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="pli_plej2">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="det_adj_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SA"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
	        <lu>
	          <clip pos="1" side="tl" part="lem"/>
	          <clip pos="1" side="tl" part="a_det"/>
	          <clip pos="1" side="tl" part="nbr"/>
	          <lit-tag v="4"/>
	        </lu>
                <b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	      <b pos="2"/>
	      <chunk name="el">
	        <tags>
	          <tag><lit-tag v="pr"/></tag>
	        </tags>
	        <lu>
	          <lit v="el"/>
	          <lit-tag v="pr"/>
	        </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: MÉS NOM QUE ('més/menys llibertat que - pli/malpli da libereco ol')">
      <pattern>
	<pattern-item n="mes"/>
	<pattern-item n="nom"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="nom_comparatiu" case="caseFirstWord">
		<tags>
	           <tag><lit-tag v="SN"/></tag>
	           <tag><clip pos="2" side="sl" part="gen"/></tag>
	           <tag><var n="nombre"/></tag>
	           <tag><var n="case"/></tag>
	           <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b/>
                <lu>
                  <lit v="da"/>
                  <lit-tag v="pr"/>
                </lu>
		<b pos="1"/>
		<lu>
	          <clip pos="2" side="tl" part="lemh"/>
	          <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen"/>
	          <clip pos="2" side="tl" part="nbr"/>
	          <lit-tag v="nom"/>
	          <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="2"/>
                <lu>
                  <lit v="ol"/>
                  <lit-tag v="cnjcoo"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: TAN ADJECTIU QUE (tan gran que -> tiel granda ke) (EO)">
      <pattern>
	<pattern-item n="tan"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcomp"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adj_comparatiu" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SA"/></tag>
		  <tag><clip pos="2" side="sl" part="gen"/></tag>
		  <tag><clip pos="2" side="sl" part="nbr"/></tag>
	          <tag><var n="case"/></tag>
	          <tag><var n="changecase"/></tag>
		</tags>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_adj"/>
	          <clip pos="2" side="sl" part="nbr"/>
	          <lit-tag v="4"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
		<b pos="2"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
		<lu>
	          <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DE MANERA ADJ (de forma escandalosa -> skandale)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="adv"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
	          <lit-tag v="adv"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DE MANERA ADJ I ADJ (de forma escandalosa i monstruosa -> skandale kaj monstre)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="adj"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adj"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
	      <chunk name="adv" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="adv"/></tag>
		</tags>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
	          <lit-tag v="adv"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
		<b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/>
	    </lu>
		<b pos="4"/>
		<lu>
		  <clip pos="5" side="tl" part="lemh"/>
	          <lit-tag v="adv"/>
		  <clip pos="5" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DE FORMA QUE (de forma que -> tiel ke) (EO)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="cnjcomp"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>
		 <chunk name="adv" case="caseFirstWord">
            		<tags>
            	  	<tag><lit-tag v="adv"/></tag>
            		</tags>
		<lu>
	          <lit v="tiel"/>
                  <lit-tag v="adv"/>
		</lu>
	      </chunk>
	      <b pos="2"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
		<lu>
	          <lit v="ke"/>
                  <lit-tag v="cnjsub"/>
		</lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="REGLA: DE FORMA A INF (de forma a fer -> por fari)">
      <pattern>
        <pattern-item n="de"/>
	<pattern-item n="forma_manera"/>
	<pattern-item n="a"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>          	
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="4"/>
        </call-macro>
	    <out>
		 <chunk name="por" case="caseFirstWord">
            		<tags>
            	  	<tag><lit-tag v="pr"/></tag>
            		</tags>
		<lu>
	          <lit v="por"/>
                  <lit-tag v="pr"/>
		</lu>
	      </chunk>
	      <b pos="3"/>
                  <chunk name="inf">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
	      </chunk>
	    </out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="REGLA: DET:un  - the derminer 'un' should just be deleted. Having this rule makes it possible to avoid handling 'un' in all the other rules">
      <pattern>
        <pattern-item n="un_det"/>
      </pattern>
      <action>
<!--
        <choose>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="lem"/><lit v="A"/></equal>
          </test>
          <let><var n="venontaVortoEstuMajuskla"/><lit v="true"/></let>
        </when>
        </choose>
          <let><var n="EOS"/><lit v="false"/></let>
-->
      </action>
    </rule>


<rule comment="REGLA: DETERMINANT (perquè no doni error si va davant de desconegudes i no es pot assignar nombre) (EO)">
      <pattern>
	<pattern-item n="det"/>
      </pattern>
      <action>        	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	      <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<!-- ****** REGLES DE SV *********************************************** -->


<rule comment=", VERBfet QUE (únicament per corregir al tagger quan s'equivoca amb FAKTO i amb KE) (EO)">
      <pattern>
	<pattern-item n="sent_coma"/>
	<pattern-item n="fet"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>

        <out>
	  <chunk name="cm">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	   <b pos="1"/>
           <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="m"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
                <lit v="fakto"/>
		<lit-tag v="n"/>
		<lit-tag v="sg"/>
	        <lit-tag v="4"/>
            </lu>
           </chunk>
	   <b pos="2"/>
	 <chunk name="relatiu">
            <tags>
            <tag><lit-tag v="SNrelatiu"/></tag>
            <tag><lit-tag v="nom"/></tag>
            </tags>
            <lu>
                <lit v="kiu"/>
		<lit-tag v="prn"/>
		<lit-tag v="rel"/>
		<lit-tag v="sg"/>
		<lit-tag v="2"/>
            </lu>
          </chunk>
          </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBparir + QUE (pareix que, únicament per corregir el tagger) - aquesta regla ha d'estar davant de VERB + QUE">
      <pattern>
	<pattern-item n="parir_volar_creuar"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="m_parir_volar_creuar">
	  <with-param pos="1"/>
	</call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

            <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERB + QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EO)">
      <pattern>
	<pattern-item n="verbcjger"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		<b pos="1"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
            		<lu>
              		<lit v="ke"/>
			<lit-tag v="cnjsub"/>
            		</lu>
          		</chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERB ADV QUE ( únicament per corregir al tagger quan s'equivoca amb el KE) (EO)">
      <pattern>
	<pattern-item n="verbcjger"/>
	<pattern-item n="adv"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		<b pos="1"/>
		  <chunk name="adv">
		    <tags>
		      <tag><lit-tag v="adv"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		<b pos="2"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
            		<lu>
              		<lit v="ke"/>
			<lit-tag v="cnjsub"/>
            		</lu>
          		</chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="VERB ADJ QUE ( el ADJ passa a ADV (i es correix OL -> KE): sembla bé que -> ŝajnas bone ke )">
<!--
problema: és millor que vingui / és millor que jo
-->
      <pattern>
	<pattern-item n="verbcj"/>
	<pattern-item n="adjADJ"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		<b pos="1"/>
                <chunk name="adv">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b pos="2"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
            		<lu>
              		<lit v="ke"/>
			<lit-tag v="cnjsub"/>
            		</lu>
          		</chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="VERB ADV ADJ QUE ( el ADJ passa a ADV (i es correix OL -> KE): sembla molt bé que -> ŝajnas molt bone ke )">
<!--
problema: és molt millor que vingui / és molt millor que jo
-->
      <pattern>
	<pattern-item n="verbcj"/>
	<pattern-item n="preadv"/>
	<pattern-item n="adjADJ"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		<b pos="1"/>
                <chunk name="adv">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
		    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b pos="3"/>
		 <chunk name="cnjsub">
            		<tags>
            	  	<tag><lit-tag v="cnjsub"/></tag>
            		</tags>
            		<lu>
              		<lit v="ke"/>
			<lit-tag v="cnjsub"/>
            		</lu>
          		</chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="ANAR + INF + QUE (vaig dir que, únicament per corregir el tagger) EO">
      <pattern>
        <pattern-item n="anar"/>
        <pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
              <chunk name="verbcj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		 <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="sep"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBestar + GERUNDI + QUE (per corregir el ke) (estar dient que  EO)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBestar + ADV + GERUNDI + QUE (per corregir el ke) (estar sempre/constantment cantant EO)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="adv"/>
	<pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
 	          <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="VERBestar_a_punt_de + INF + QUE (per corregir el ke) (estar a punt de EO)">
      <pattern>
	<pattern-item n="estarapuntde"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk name="verb_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBacabarde + INF + QUE (per corregir el ke) (acabar de EO)">
      <pattern>
	<pattern-item n="acabarde"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBestar + GERUNDI (estar cantant EO)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBestar + ADV + GERUNDI (estar sempre/constantment cantant EO)">
      <pattern>
	<pattern-item n="estar"/>
	<pattern-item n="adv"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
 	          <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="VERBcontinuar + GERUNDI (continuar cantant EO)">
      <pattern>
	<pattern-item n="continuar"/>
	<pattern-item n="ger"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                       <lit v="plu"/>
                       <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBcontinuar + GERUNDI + QUE (continuar pensant EO)">
      <pattern>
	<pattern-item n="continuar"/>
	<pattern-item n="ger"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                       <lit v="plu"/>
                       <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBestar_a_punt_de + INF (estar a punt de EO)">
      <pattern>
	<pattern-item n="estarapuntde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk name="verb_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="HAVER/ANAR VERBacabarde + INF (acabar de EO)">
      <pattern>
	<pattern-item n="haveranar"/>
	<pattern-item n="acabarde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
	    <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                  </chunk>
            </out>
	  <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
	  </let>
      </action>
    </rule>

<rule comment="VERBacabarde + INF (acabar de EO)">
      <pattern>
	<pattern-item n="acabarde"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="ĵus"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="HAVER/ANAR VERBtornara + INF (tornar a EOes)">
      <pattern>
	<pattern-item n="haveranar"/>
	<pattern-item n="tornara"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
	    <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                  </chunk>
            </out>
	  <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
	  </let>
      </action>
    </rule>

<rule comment="VERBtornara + INF (tornar a EOes)">
      <pattern>
	<pattern-item n="tornara"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="HAVER/ANAR VERBtornara + INF + QUE (tornar a EOes)">
      <pattern>
	<pattern-item n="haveranar"/>
	<pattern-item n="tornara"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>


                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
	    <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
            </out>
	  <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
	  </let>
      </action>
    </rule>

<rule comment="VERBtornara + INF + QUE (tornar a EOes)">
      <pattern>
	<pattern-item n="tornara"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>

      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="denove"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verbcj_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>

                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBparir + INF (parir = parèixer EOes)">
      <pattern>
	<pattern-item n="parir_volar_creuar"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
	<call-macro n="m_parir_volar_creuar">
	  <with-param pos="1"/>
	</call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="vol + INF (vol (n) = voli EOes)">
      <pattern>
	<pattern-item n="vol_creu"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="m_vol_creu">
	  <with-param pos="1"/>
	</call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="pri"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="vblex"/>
                      <lit-tag v="pres"/>
                    </lu>
                  <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="vol + INF + QUE (vol (n) = voli EOes)">
      <pattern>
	<pattern-item n="vol_creu"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="m_vol_creu">
	  <with-param pos="1"/>
	</call-macro>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><lit-tag v="pri"/></tag>
                      <tag><lit-tag v="p3"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="vblex"/>
                      <lit-tag v="pres"/>
                    </lu>
                  <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBparir + INF + QUE (pareix dir que, únicament per corregir el tagger) EO">
      <pattern>
	<pattern-item n="parir_volar_creuar"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="m_parir_volar_creuar">
	  <with-param pos="1"/>
	</call-macro>

	<choose>

              <when>           <!-- traduccions a participi -->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pp"/><!-- -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="pp"/>
                </let>
            <out>

                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	              <tag><var n="case"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="vblex"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="5"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
            </out>
              </when>
            <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
			<tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="inf"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBdeure + INF (deuen treballar -> eble laboras)">
      <pattern>
	<pattern-item n="deure"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="eble"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERBdeure + INF + QUE (deuen pensar que -> eble pensas ke)">
      <pattern>
	<pattern-item n="deure"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp2"/>
                </let>
                <out>
		 <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="eble"/>
                      <lit-tag v="adv"/>
                    </lu>
		</chunk>
		<b pos="1"/>
                  <chunk name="verb_perif">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="ANAR + A + INF (anem a llegir; es tradueix a futur EO)">
      <pattern>
	<pattern-item n="anar_a"/>
	<pattern-item n="a"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <let>
          <clip pos="3" side="tl" part="temps"/>
          <lit-tag v="fti"/>
        </let>
                <out>

	  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="adv"/></tag>
                    </tags>
		    <lu>
                      <lit v="tuj"/>
                      <lit-tag v="adv"/>
                    </lu>
	  </chunk>
	  <b/>
	  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<rule comment="VERB + ADJ + INF (el ADJ passa a ADV: sempre és interessant llegir -> ĉiam estas interese legi EO)">
      <pattern>
	<pattern-item n="verbcj2"/>
	<pattern-item n="adjADJ"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_adj_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
	        <b pos="1"/>
                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
                        <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
		</chunk>

                <b pos="2"/>

	    <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="temps"/></tag>
	    </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
	    </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

<rule comment="VERB + ADV + ADJ + INF (el ADJ passa a ADV: és sempre interessant llegir -> estas ĉiam interese legi EO)">
      <pattern>
	<pattern-item n="verbcj2"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjADJ"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_adj_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
	        <b pos="1"/>
                <chunk name="adv">
                        <tags>
                        <tag><lit-tag v="adv"/></tag>
                        </tags>
	    		<lu>
	      		<clip pos="2" side="tl" part="lem"/>
	      		<clip pos="2" side="tl" part="a_adv"/>
	    		</lu>
	    		<b/>
                        <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="adv"/>
                        </lu>
		</chunk>

                <b pos="2"/>

	    <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="temps"/></tag>
	    </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
	    </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="VERB conjugat ( pinto ) (EO)">
      <pattern>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- no està encara madur: cal tractar com a mínim els casos de verbs compostos amb haver/anar: potser deixar-ho per a t2x
    <rule comment="REGLA: PRON VERB ( el menjo -> manĝas lin ) ">
      <pattern>
	<pattern-item n="pro"/>
	<pattern-item n="verbcj"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
		  <chunk name="pro_obj">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="tl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
-->


<!-- montriĝas, ke ofte temas pri verboj mankantaj en nia vortaro; ni konsideras la nekonataĵon kiel verbon por helpi la postan sintaksan analizon -->
    <rule comment="REGLA: PRON UNK ( el menju -> *menju lin ) ">
      <pattern>
	<pattern-item n="pro"/>
	<pattern-item n="unknown"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombro1">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

                <out>
		  <chunk name="pro_obj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="tl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
                  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV.vblex.pri.p3.sg.res"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="ANAR + INF (vaig venir) EO">
      <pattern>
        <pattern-item n="anar"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
              <chunk name="verbcj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="sep"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="ANAR ADV INF (vaig ràpidament venir) EO">
      <pattern>
        <pattern-item n="anar"/>
        <pattern-item n="adv"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <let>
          <clip pos="3" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
		  <chunk name="adv" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="adv"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		<b pos="1"/>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="VERB conjugat + INF (volia cantar; EO)">
      <pattern>
	<pattern-item n="verbcj"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <!--<call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>-->
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

	<out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
	    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="VERB conjugat + INF + QUE (volia dir que; EO)">
      <pattern>
	<pattern-item n="verbcj"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
        <!--<call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>-->
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>

	<out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		      <!--<tag><var n="tipus_verb2"/></tag>-->
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="sep"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
	    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="ANAR + INF + INF (vaig voler/estar a punt de venir) EO">
      <pattern>
	<pattern-item n="anar"/>
	<pattern-item n="inf"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>		
	  <lit-tag v="past"/>
	</let>

	    <out>
	      <chunk name="verbcj_perif" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <clip pos="3" side="tl" part="pers"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
          <with-param pos="2"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="ANAR + INF + INF + QUE (vaig voler dir que) EO">
      <pattern>
	<pattern-item n="anar"/>
	<pattern-item n="inf"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
	<let>
	  <clip pos="2" side="tl" part="temps"/>		
	  <lit-tag v="past"/>
	</let>

	    <out>
	      <chunk name="verbcj_perif" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		  <tag><clip pos="2" side="tl" part="temps"/></tag>
		  <tag><clip pos="1" side="tl" part="pers"/></tag>
		  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
		</tags>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_verb"/>
		  <clip pos="2" side="tl" part="sep"/>
		  <clip pos="2" side="tl" part="temps"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
		<b pos="1"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_verb"/>
		  <clip pos="3" side="tl" part="temps"/>
		  <clip pos="3" side="tl" part="pers"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	      </chunk>
                  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
	    </out>
	<call-macro n="f_bcond">
	  <with-param pos="1"/>
          <with-param pos="2"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="ANAR + INF +enc + INF (vaig voler-los comprar) EO">
      <pattern>
	<pattern-item n="anar"/>
	<pattern-item n="inf"/>
	<pattern-item n="enc"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

	<let>
	  <clip pos="2" side="tl" part="temps"/>		
	  <lit-tag v="past"/>
	</let>
	    <choose><!--mirem els proclítics -->
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="3" side="sl" part="pers"/>
		    </equal>
		    <and>
		      <equal>
			<clip pos="1" side="sl" part="nbr"/>
			<clip pos="3" side="sl" part="nbr"/>
		      </equal>
		      <equal caseless="yes">
			<clip pos="3" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </and>
		  </or>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="3"/>
                  <with-param pos="4"/>
		</call-macro>
	      </when>
<!--
	      <otherwise>
		
		<out>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
-->
	    </choose>

		<out>
		  <chunk name="verbcj_perifC1" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>
		   <b/>
		    <lu>
		      <clip pos="4" side="tl" part="lemh"/>
		      <clip pos="4" side="tl" part="a_verb"/>
		      <clip pos="4" side="tl" part="sep"/>
		      <clip pos="4" side="tl" part="temps"/>
		      <clip pos="4" side="tl" part="lemq"/>
		    </lu>
		  </chunk>
		  <b/>
		  <chunk name="pro">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
              <with-param pos="2"/>
	    </call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="ANAR + INF +enc + INF + QUE (vaig voler-los dir que) EO">
      <pattern>
	<pattern-item n="anar"/>
	<pattern-item n="inf"/>
	<pattern-item n="enc"/>
	<pattern-item n="inf"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

	<let>
	  <clip pos="2" side="tl" part="temps"/>		
	  <lit-tag v="past"/>
	</let>
	    <choose><!--mirem els proclítics -->
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="3" side="sl" part="pers"/>
		    </equal>
		    <and>
		      <equal>
			<clip pos="1" side="sl" part="nbr"/>
			<clip pos="3" side="sl" part="nbr"/>
		      </equal>
		      <equal caseless="yes">
			<clip pos="3" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </and>
		  </or>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="3"/>
                  <with-param pos="4"/>
		</call-macro>
	      </when>
<!--
	      <otherwise>
		<out>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		    </tags>
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
-->
	    </choose>

		<out>
		  <chunk name="verbcj_perifC2" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>
		   <b pos="1"/>
		    <lu>
		      <clip pos="4" side="tl" part="lemh"/>
		      <clip pos="4" side="tl" part="a_verb"/>
		      <clip pos="4" side="tl" part="sep"/>
		      <clip pos="4" side="tl" part="temps"/>
		      <clip pos="4" side="tl" part="lemq"/>
		    </lu>
		  </chunk>
		   <b pos="2"/>
		  <chunk name="pro">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="3" side="sl" part="pers"/></tag>
		      <tag><clip pos="3" side="tl" part="gen"/></tag>
		      <tag><clip pos="3" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		    </tags>
<!--
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_prn"/>
		      <clip pos="3" side="tl" part="tipus_prn"/>
		      <clip pos="3" side="tl" part="pers"/>
		      <clip pos="3" side="tl" part="gen"/>
		      <clip pos="3" side="tl" part="nbr"/>
		      <clip pos="3" side="tl" part="lemq"/>
		    </lu>
-->
		    <lu>
		      <clip pos="3" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
		</out>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
              <with-param pos="2"/>
	    </call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="ANAR + INF + INF +enc + QUE (vaig voler dir-los que) EO">
      <pattern>
	<pattern-item n="anar"/>
	<pattern-item n="inf"/>
	<pattern-item n="inf"/>
	<pattern-item n="enc"/>
        <pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

	<let>
	  <clip pos="2" side="tl" part="temps"/>		
	  <lit-tag v="past"/>
	</let>
	    <choose><!--mirem els proclítics -->
	      <when>
		<test>
		  <or>
		    <equal>
		      <clip pos="2" side="sl" part="pron"/>
		      <lit-tag v="pron"/>
		    </equal>
		    <equal>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="4" side="sl" part="pers"/>
		    </equal>
		    <and>
		      <equal>
			<clip pos="1" side="sl" part="nbr"/>
			<clip pos="4" side="sl" part="nbr"/>
		      </equal>
		      <equal caseless="yes">
			<clip pos="4" side="sl" part="lem"/>
			<lit v="es"/><!--és 'sp' -->
		      </equal>
		    </and>
		  </or>
		</test>	
		<call-macro n="f_bcond"><!--imprimeix el blanc si té info de format, el pronom no l'imprimeixis -->
		  <with-param pos="4"/>
                  <with-param pos="5"/>
		</call-macro>
	      </when>
<!--
	      <otherwise>
		<out>
		  <chunk name="pro" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="4" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="4" side="sl" part="pers"/></tag>
		      <tag><clip pos="4" side="tl" part="gen"/></tag>
		      <tag><clip pos="4" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		    </tags>
		    <lu>
		      <clip pos="4" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		</out>
	      </otherwise>
-->
	    </choose>

		<out>
		  <chunk name="verbcj_perifC3" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SV"/></tag>
		      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
		      <tag><clip pos="2" side="tl" part="temps"/></tag>
		      <tag><clip pos="1" side="tl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <clip pos="2" side="tl" part="lemh"/>
		      <clip pos="2" side="tl" part="a_verb"/>
		      <clip pos="2" side="tl" part="sep"/>
		      <clip pos="2" side="tl" part="temps"/>
		      <clip pos="2" side="tl" part="lemq"/>
		    </lu>
		   <b pos="1"/>
		    <lu>
		      <clip pos="3" side="tl" part="lemh"/>
		      <clip pos="3" side="tl" part="a_verb"/>
		      <clip pos="3" side="tl" part="sep"/>
		      <clip pos="3" side="tl" part="temps"/>
		      <clip pos="3" side="tl" part="lemq"/>
		    </lu>
		  </chunk>
		  <b pos="2"/>
		  <chunk name="pro">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="4" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="4" side="sl" part="pers"/></tag>
		      <tag><clip pos="4" side="tl" part="gen"/></tag>
		      <tag><clip pos="4" side="tl" part="nbr"/></tag>
		      <tag><var n="tipus_verb"/></tag>
		    </tags>
		    <lu>
		      <clip pos="4" side="tl" part="whole"/>
		    </lu>
		  </chunk>
		  <b/>
                  <chunk name="cnjsub">
                    <tags>
                      <tag><lit-tag v="cnjsub"/></tag>
                    </tags>
                    <lu>
                      <lit v="ke"/>
                      <lit-tag v="cnjsub"/>
                    </lu>
                  </chunk>
		</out>
	    <call-macro n="f_bcond">
	      <with-param pos="1"/>
              <with-param pos="2"/>
	    </call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>
	


    <rule comment="HAVER + PP (ell ha llegit aquell llibre - Li legis tiun libron; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

              <when>  <!-- traduccions des de gerundi -> inte -->
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="gerpast"/> <!-- inte -->
                </let>
                <out>
                  <chunk name="verbger" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <!-- <clip pos="2" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="gerpast"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

	    <otherwise>
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
		  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ger"/><!--digué -->
                    </equal>
		</or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="HAVER + PP + QUE (ell ha llegit aquell llibre - Li legis tiun libron;  precorregir el KE) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="pp"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
          </when>
	    <otherwise>
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                <b pos="1"/>
                 <chunk name="cnjsub">
                        <tags>
                        <tag><lit-tag v="cnjsub"/></tag>
                        </tags>
                        <lu>
                        <lit v="ke"/>
                        <lit-tag v="cnjsub"/>
                        </lu>
                        </chunk>

                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="HAVER + PP + INF (ell ha decidit marxar ) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="pp"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
          </when>
	    <otherwise>
	    <choose>
              <when>      <!-- traduccions des de passat -> ESTIS + PP (2)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="ifi"/><!--digué -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pii"/><!--deia -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pis"/><!--digués -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de futur -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="fti"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="fti"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
              <when>      <!-- traduccions des de condicional -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="cni"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="cni"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>

              <when>      <!-- traduccions des de infinitiu -> ESTIS + PP (3)-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="inf"/><!--digué -->
                    </equal>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="inf"/>
                </let>
                <let>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </let>
                <let>
                  <clip pos="2" side="tl" part="temps"/>
                  <lit-tag v="pp3"/>
                </let>
              </when>
	     </choose>

                <out>
                  <chunk name="verbcj_perif" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhaver + VERBser-pp + PP (kompleksa pasivo: ha estat llegit - estis legita ; forfalas unu helpverbo) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifP1" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBhaver + VERBser-pp + PP + PER (kompleksa pasivo: ha estat llegit per - estis legita de; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifP1" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/> <!-- ŝanĝo al DE-->
	  <chunk name="de">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="VERBhaver + VERBser-pp + PP + PER + INF (kompleksa pasivo: ha estat llegit per riure - estis legita por ridi; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifP1" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/> <!-- ŝanĝo al POR-->
	  <chunk name="por">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="4"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="5" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_verb"/>
	      <clip pos="5" side="tl" part="sep"/>
	      <clip pos="5" side="tl" part="temps" link-to="3"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="VERBhaver + VERBser-pp + PP + ADV + PER (kompleksa pasivo: ha estat llegit també per - estis legita ankaŭ de; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="adv"/>
	<pattern-item n="per"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifP1" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="4" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="4"/> <!-- ŝanĝo al DE-->
	  <chunk name="de">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="VERBhaver + VERBser-pp + PP + ADV + PER + INF (kompleksa pasivo: ha estat llegit també per riure - estis legita ankaŭ por ridi; forfalas unu helpverbo + ŝanĝo prepozicio) (EO)">
      <pattern>
	<pattern-item n="haver"/>
	<pattern-item n="ser-pp"/>
	<pattern-item n="pp"/>
	<pattern-item n="adv"/>
	<pattern-item n="per"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
<!-- ĉar pasivo, prefere vbser
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
-->

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="1" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="verbcj_perifP1" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><lit-tag v="vbser"/></tag>	<!-- pasivo -->
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                    </lu>
		    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
        <out>
          <b pos="3"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="4" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lem"/>
	      <clip pos="4" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="4"/> <!-- ŝanĝo al POR-->
	  <chunk name="por">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="5"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="6" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="6" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="6" side="tl" part="lemh"/>
	      <clip pos="6" side="tl" part="a_verb"/>
	      <clip pos="6" side="tl" part="sep"/>
	      <clip pos="6" side="tl" part="temps" link-to="3"/>
	      <clip pos="6" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
        </out>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>



    <rule comment="de + INF (de venir) EO">
      <pattern>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <clip pos="2" side="tl" part="temps"/>
          <lit-tag v="inf"/>
        </let>
            <out>
              <chunk name="verbcj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="PROCLITIC PROCLITIC (me'ls EO)">
      <pattern>
	<pattern-item n="proenc"/>
	<pattern-item n="proenc"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
		<out>
		  <chunk name="pro_directe" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="2" side="sl" part="pers"/></tag>
		      <tag><clip pos="2" side="tl" part="gen"/></tag>
		      <tag><clip pos="2" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
	              <clip pos="2" side="tl" part="lem"/>
		      <clip pos="2" side="tl" part="a_prn"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="2" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
     <!-- Si el primer clitic és SE: l'eliminem; si no el fem objecte indirecte (eliminem les formes SE ja que estadísticament sembla justificat, la majoria de vegades són benefactius, etc...-->

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->	
                <let>
                  <clip pos="1" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
		<out>
		  <b pos="1"/>
		  <chunk name="pro_indirecte">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		    <lu>
		      <lit v="al"/>
		      <lit-tag v="pr"/>
		    </lu>
		    <b pos="1"/>
		    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		    </lu>
		  </chunk>
		</out>
        </otherwise>
      </choose>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PRO_FORT PROCLITIC (a mi em, a ella li, ... regla per simplificar el clitic doubling EO'a mi em' -> min)">
      <pattern>
        <pattern-item n="profort"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PRO_FORT PROCLITIC PROCLITIC (a mi me'l, a ella se'l, ... regla per simplificar el clitic doubling EO 'a mi me'l' -> lin al mi )">
      <pattern>
        <pattern-item n="profort"/>
        <pattern-item n="proenc"/>
        <pattern-item n="proenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
                <out>
                  <chunk name="pro_directe" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
	              <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_prn"/>
		      <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="3" side="sl" part="pers"/>
		      <clip pos="3" side="tl" part="gen"/>
		      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                    <b pos="1"/>
                 <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="1" side="sl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="gen"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
                    </lu>
                  </chunk>

                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <rule comment="PROCLITIC (EO)">
      <pattern>
	<pattern-item n="proenc"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

          <choose>
              <when>  <!-- mirem si és SE o EN per no fer res-->
                <test>
		  <or>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                    <equal>
                      <clip pos="1" side="sl" part="tipus_prn"/>
                      <lit-tag v="adv"/>
                    </equal>
		  </or>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: el traduim) -->	
		<out>
		  <chunk name="pro_obj" case="caseFirstWord">
		    <tags>
		      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
		      <tag><clip pos="1" side="sl" part="pers"/></tag>
		      <tag><clip pos="1" side="tl" part="gen"/></tag>
		      <tag><clip pos="1" side="tl" part="nbr"/></tag>
		    </tags>
		   <lu>
	              <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_prn"/>
		      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="1" side="sl" part="pers"/>
		      <clip pos="1" side="tl" part="gen"/>
		      <clip pos="1" side="tl" part="nbr"/>
		   </lu>

		  </chunk>
		</out>
	</otherwise>
	</choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>



    <rule comment="INF_IMP + ENCL + INF (haver-los de comprar; poder-los comprar; voler-los comprar; deixa'l llegir. El clític passa al final EO- )">
      <pattern>
	<pattern-item n="inf_imp"/>
	<pattern-item n="enc"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal caseless="yes">
                        <clip pos="2" side="sl" part="lem"/>
                        <lit v="es"/><!--és 'sp' -->
                      </equal>
                </test>

	<out>
	  <chunk name="verb_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>

	  </chunk>
	</out>
             </when>
<otherwise>
	<out>
	  <chunk name="verb_inf_enc" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	
            <b pos="1"/>
             <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="sep"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
             </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	</otherwise>
	</choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="INF_IMP + ENCL + ENCL + INF (haver-los de comprar; poder-los comprar; voler-los comprar; deixa'l llegir. El clític passa al final EO- )">
      <pattern>
	<pattern-item n="inf_imp"/>
	<pattern-item n="enc"/>
	<pattern-item n="enc"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>              	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

	<out> <!-- primer pintem els vebrs -->
	  <chunk name="verb_enc_inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><clip pos="1" side="sl" part="pers"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>	
            <b pos="1"/>
             <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="sep"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
             </lu>

	  </chunk>
	 <b/>
                  <chunk name="pro_directe">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="3" side="sl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="gen"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
	              <clip pos="3" side="tl" part="lem"/>
		      <clip pos="3" side="tl" part="a_prn"/>
		      <clip pos="3" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="3" side="sl" part="pers"/>
		      <clip pos="3" side="tl" part="gen"/>
		      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
     <!-- Si el primer clitic és SE: l'eliminem; si no el fem objecte indirecte (eliminem les formes SE ja que estadísticament sembla justificat, la majoria de vegades són benefactius, etc...-->

          <choose>
              <when>  <!-- mirem si és SE per no fer res-->
                <test>
                    <equal>
                      <clip pos="2" side="sl" part="tipus_prn"/>
                      <lit-tag v="ref"/>
                    </equal>
                </test>
              </when>
           <otherwise> <!-- SI NO es SE: objecte indirecte (passa a 'subj' per agafar nominatiu i s'afegeix la prep 'al') -->
                <let>
                  <clip pos="2" side="tl" part="tipus_prn"/>
                  <lit-tag v="subj"/>
                </let>
                <out>
                  <b pos="1"/>
                  <chunk name="pro_indirecte">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="sl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <lit v="al"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
	              <clip pos="2" side="tl" part="lem"/>
		      <clip pos="2" side="tl" part="a_prn"/>
		      <clip pos="2" side="tl" part="tipus_prn" link-to="2"/>
		      <clip pos="2" side="sl" part="pers"/>
		      <clip pos="2" side="tl" part="gen"/>
		      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                  </chunk>
                </out>
        </otherwise>
      </choose>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + PER -> estimat per -> amata de">
      <pattern>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="1"/>
	  <chunk name="de">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + PER + INF -> volgut per menjar -> dezirita por manĝi">
      <pattern>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="1"/> <!-- ŝanĝo al POR-->
	  <chunk name="por">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="2"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="3" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="sep"/>
	      <clip pos="3" side="tl" part="temps" link-to="3"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + ADV + PER -> estimat també per -> amata ankaŭ de">
      <pattern>
	<pattern-item n="pp"/>
	<pattern-item n="adv"/>
	<pattern-item n="per"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="1"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="2" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="2"/> <!-- ŝanĝo al DE-->
	  <chunk name="de">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI + ADV + PER + INF -> volgut també per menjar -> dezirita ankaŭ por manĝi">
      <pattern>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
	<pattern-item n="adv"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="1"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="2" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="2" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="2"/> <!-- ŝanĝo al POR-->
	  <chunk name="por">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="3"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <clip pos="4" side="tl" part="sep"/>
	      <clip pos="4" side="tl" part="temps" link-to="3"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + PER -> molt estimat per -> tre amata de">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="2" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="2"/> <!-- ŝanĝo al DE-->
	  <chunk name="de">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + PER + INF -> molt volgut per menjar -> tre dezirita por manĝi">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="2" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="2"/> <!-- ŝanĝo al POR-->
	  <chunk name="por">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="3"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="4" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_verb"/>
	      <clip pos="4" side="tl" part="sep"/>
	      <clip pos="4" side="tl" part="temps" link-to="3"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + ADV + PER -> molt estimat també per -> tre amata ankaŭ de">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
	<pattern-item n="adv"/>
	<pattern-item n="per"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="2" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="2"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="3" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="3"/> <!-- ŝanĝo al DE-->
	  <chunk name="de">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: ADV + PARTICIPI + ADV + PER + INF -> molt volgut també per menjar -> tre dezirita ankaŭ por manĝi">
      <pattern>
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
	<pattern-item n="per"/>
	<pattern-item n="adv"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="2"/>
        </call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="2" side="sl" part="gen"/></tag>
	      <tag><clip pos="2" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	      <tag><var n="changecase"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
            <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <lit-tag v="vblex.pp"/>
	      <clip pos="2" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
          <b pos="2"/>
	  <chunk name="adv">
	    <tags>
	      <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="3" side="tl" part="neg"/></tag>
	    </tags>
	    <lu>
	      <clip pos="3" side="tl" part="lem"/>
	      <clip pos="3" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
          <b pos="3"/> <!-- ŝanĝo al POR-->
	  <chunk name="por">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
            <lu>
              <lit v="por"/>
              <lit-tag v="pr"/>
            </lu>
	  </chunk>
          <b pos="4"/>
	  <chunk name="inf">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="5" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_verb"/>
	      <clip pos="5" side="tl" part="sep"/>
	      <clip pos="5" side="tl" part="temps" link-to="3"/>
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: PARTICIPI">
      <pattern>
	<pattern-item n="pp"/>
      </pattern>
      <action>       	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>
          <let>
            <var n="case"/>
            <lit-tag v="nom"/>
          </let>

	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <tag><clip pos="1" side="sl" part="nbr"/></tag>
              <tag><var n="case"/></tag>
	    </tags> 	
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="pp"/>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="4"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="REGLA: VERBinf no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
	<pattern-item n="inf"/>
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="inf" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="sep"/>
	      <clip pos="1" side="tl" part="temps" link-to="3"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="REGLA: VERBger no conjugat (perquè posi bé la cua en multiparaules)">
      <pattern>
	<pattern-item n="ger"/>
      </pattern>
      <action>     	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="ger" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><clip pos="1" side="tl" part="temps"/></tag>
	      <tag><var n="tipus_verb"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="sep"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<!-- *** duoblaj neoj *** -->

    <rule comment="ADVNEG NO ( mai no -> neniam )">
      <pattern>
	<pattern-item n="advneg"/>
	<pattern-item n="no"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="1" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="1" side="tl" part="lem"/>
	              <clip pos="1" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADVNEG ( ne chante jamais -> neniam kantas )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="advneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver ADVNEG + PP (n'a jamais lu - neniam legis ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="haver"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj_perifB">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
		    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NE PRON VERBconj ADVNEG ( ne le chante jamais -> neniam kantas ĝin )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="pro"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="advneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="3"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="sep"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE PRON VERBhaver ADVNEG + PP (ne l'a jamais lu - neniam legis ĝin ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="pro"/>
	<pattern-item n="haver"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="3" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		    <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
                  <chunk name="verbcj_perifB">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                    </lu>
		    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		    <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NE VERBconj PRONNEG ( ne chante rien -> kantas nenion )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="pronneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="2"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver PRONNEG + PP (n'a jamais lu - neniam legis ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="haver"/>
	<pattern-item n="pronneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="4" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
                  <chunk name="verbcj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="2"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

                <out>
                  <chunk name="verbcj_perifB" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
		    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <!-- <clip pos="4" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="3"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NE VERBconj ADVNEG PRONNEG ( ne chante jamais rien -> neniam kantas ion )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="verbcj"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pronneg"/>
      </pattern>
      <action>    	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="set_temps">
          <with-param pos="2"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                      <tag><var n="tipus_verb2"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="sep"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="3"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NE VERBhaver ADVNEG PRONNEG PP (n'a jamais rien lu - neniam legis ion ; es tradueix per passat) (EO)">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="haver"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pronneg"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>

        <choose>
              <when>  <!-- traduccions des de present -> passat (1)-->
                <test>
                  <or>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="pri"/><!--present indicatiu dic -->
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="temps"/>
                      <lit-tag v="prs"/><!--present subjunctiu digui -->
                    </equal>
                  </or>
                </test>
                <let>
                  <clip pos="5" side="tl" part="temps"/>
                  <lit-tag v="past"/> <!-- present -->
                </let>
                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="past"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="4"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
          </when>
	    <otherwise>
        <call-macro n="set_temps2">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

                <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
                  <chunk name="verbcj_perifB">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipus_verb"/></tag>
                    </tags>
                    <lu>
		      <lit v="esti"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                    </lu>
		    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <!-- <clip pos="5" side="tl" part="temps"/> --> <!-- per alguna raó falla a vegades amb vbser -->
                      <lit-tag v="pp3"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
		  <b pos="4"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
                </out>
            </otherwise>
	</choose>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="NO ANAR INF ADVNEG ( no vaig cantar mai -> neniam kantis )">
      <pattern>
	<pattern-item n="no"/>
        <pattern-item n="anar"/>
        <pattern-item n="inf"/>
	<pattern-item n="advneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <let>
          <clip pos="3" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO ANAR ADVNEG INF ( no vaig mai cantar -> neniam kantis )">
      <pattern>
	<pattern-item n="no"/>
        <pattern-item n="anar"/>
	<pattern-item n="advneg"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <let>
          <clip pos="4" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO ANAR INF ADVNEG PRONEG ( no vaig cantar mai res -> neniam kantis ion )">
      <pattern>
	<pattern-item n="no"/>
        <pattern-item n="anar"/>
        <pattern-item n="inf"/>
	<pattern-item n="advneg"/>
	<pattern-item n="pronneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <let>
          <clip pos="3" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
		  <b pos="2"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO ANAR ADVNEG INF PRONEG ( no vaig mai cantar res -> neniam kantis ion )">
      <pattern>
	<pattern-item n="no"/>
        <pattern-item n="anar"/>
	<pattern-item n="advneg"/>
        <pattern-item n="inf"/>
	<pattern-item n="pronneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>

        <let>
          <clip pos="4" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="3" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="3" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="3" side="tl" part="lem"/>
	              <clip pos="3" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="1"/>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
		  <b pos="2"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="io"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO ANAR INF PRONEG ( no vaig cantar res -> kantis nenion )">
      <pattern>
	<pattern-item n="no"/>
        <pattern-item n="anar"/>
        <pattern-item n="inf"/>
	<pattern-item n="pronneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="3"/>
        </call-macro>

        <let>
          <clip pos="3" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="3" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="sep"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
		  <b pos="2"/>
	          <chunk name="prn_nosubj">
	            <tags>
                      <tag><lit-tag v="SN.tn.sg.nom"/></tag>
	            </tags>
	            <lu>
                      <lit v="nenio"/>
                      <lit-tag v="prn.tn.3.4"/>
	            </lu>
	          </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO PRO ANAR INF ADVNEG ( no ho vaig cantar mai -> neniam kantis ĝin )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="pro"/>
        <pattern-item n="anar"/>
        <pattern-item n="inf"/>
	<pattern-item n="advneg"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="4"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

        <let>
          <clip pos="4" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="5" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="5" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="5" side="tl" part="lem"/>
	              <clip pos="5" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="sep"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
		  <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NO PRO ANAR ADVNEG INF ( no ho vaig mai cantar -> neniam kantis ĝin )">
      <pattern>
	<pattern-item n="no"/>
	<pattern-item n="pro"/>
        <pattern-item n="anar"/>
	<pattern-item n="advneg"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verbs">
          <with-param pos="5"/>
        </call-macro>
	<call-macro n="nombro1">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="default_nombro">
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

        <let>
          <clip pos="5" side="tl" part="temps"/>
          <lit-tag v="past"/>
        </let>
            <out>
	          <chunk name="adv" case="caseFirstWord">
	            <tags>
	              <tag><clip pos="4" side="tl" part="a_adv"/></tag>
	              <tag><clip pos="4" side="tl" part="neg"/></tag>
	            </tags>
	            <lu>
	              <clip pos="4" side="tl" part="lem"/>
	              <clip pos="4" side="tl" part="a_adv"/>
	            </lu>
	          </chunk>
		  <b pos="2"/>
              <chunk name="verbcj">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="5" side="tl" part="temps"/></tag>
                  <tag><clip pos="3" side="tl" part="pers"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
		  <tag><var n="tipus_verb"/></tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="sep"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
		  <b pos="1"/>
	  <chunk name="prn_nosubj">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
	      <clip pos="2" side="tl" part="tipus_prn"/>
	      <clip pos="2" side="tl" part="pers"/>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="3"/>
	    </lu>
	  </chunk>
            </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>

    <!--********************************** FER + TEMPS ********************************************* -->

    <rule comment="VERBfer NUM NOMtemps (fa tres setmanes -> antaŭ tri semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_num"/>
              	<clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer MESDE NUM NOMtemps (fa menys de tres setmanes -> antaŭ malpli tri semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="mesde"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="4"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
                <clip pos="2" side="tl" part="whole"/>
            	</lu>
		<b pos="2"/>
            	<lu>
              	<clip pos="3" side="tl" part="lem"/>
              	<clip pos="3" side="tl" part="a_num"/>
              	<clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="nom"/>
            	</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer QNT NOMtemps (fa algunes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="qnt"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
	        <clip pos="2" side="tl" part="lem"/>
	        <clip pos="2" side="tl" part="a_det"/>
	        <clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer IND NOMtemps (fa una setmana -> antaŭ unu semajno)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="un_sg"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="unu"/>
	      <lit-tag v="num.sg.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer IND NOMtemps (fa unes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="un_pl"/>
	<pattern-item n="n_temps"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="kelka"/>
	      <lit-tag v="det.qnt.pl.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer NOMtemps (fa setmanes -> antaŭ semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="n_temps_pl"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <!-- idem + que -->

    <rule comment="VERBfer NUM NOMtemps (fa tres setmanes -> antaŭ tri semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
              	<clip pos="2" side="tl" part="lem"/>
              	<clip pos="2" side="tl" part="a_num"/>
              	<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer MESDE NUM NOMtemps (fa menys de tres setmanes -> antaŭ malpli tri semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="mesde"/>
	<pattern-item n="num"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="4"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="4"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
                <clip pos="2" side="tl" part="whole"/>
            	</lu>
		<b pos="2"/>
            	<lu>
              	<clip pos="3" side="tl" part="lem"/>
              	<clip pos="3" side="tl" part="a_num"/>
              	<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="nom"/>
            	</lu>
		<b pos="3"/>
		<lu>
		  <clip pos="4" side="tl" part="lemh"/>
		  <clip pos="4" side="tl" part="a_nom"/>
		  <clip pos="4" side="tl" part="gen"/>
		  <clip pos="4" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="4" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer QNT NOMtemps (fa algunes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="qnt"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
            	<lu>
	        <clip pos="2" side="tl" part="lem"/>
	        <clip pos="2" side="tl" part="a_det"/>
	        <clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="nom"/>
            	</lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer IND NOMtemps (fa una setmana -> antaŭ unu semajno)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="un_sg"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="unu"/>
	      <lit-tag v="num.sg.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer IND NOMtemps (fa unes setmanes -> antaŭ kelkaj semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="un_pl"/>
	<pattern-item n="n_temps"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="3"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="3"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
	    <lu>
	      <lit v="kelka"/>
	      <lit-tag v="det.qnt.pl.nom"/>
	    </lu>
		<b pos="2"/>
		<lu>
		  <clip pos="3" side="tl" part="lemh"/>
		  <clip pos="3" side="tl" part="a_nom"/>
		  <clip pos="3" side="tl" part="gen"/>
		  <clip pos="3" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="3" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <rule comment="VERBfer NOMtemps (fa setmanes -> antaŭ semajnoj)">
      <pattern>
	<pattern-item n="fer"/>
	<pattern-item n="n_temps_pl"/>
	<pattern-item n="cnjcoopercorregir"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>

	<out>
	  <chunk name="adv" case="caseFirstWord"> <!-- per ajudar l'anàlisi sintàctica posterior -->
	    <tags>
	      <tag><lit-tag v="adv"/></tag>
	    </tags>
	    <lu>
	      <lit v="antaŭ"/>
	      <lit-tag v="pr"/>
	    </lu>
		<b pos="1"/>
		<lu>
		  <clip pos="2" side="tl" part="lemh"/>
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen"/>
		  <clip pos="2" side="tl" part="nbr"/>
		  <lit-tag v="nom"/>
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


    <!--************************************ ALTRES ************************************************ -->

    <rule comment="UNK">
      <pattern>
	<pattern-item n="unknown"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="unknown" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="unknown"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="ADV">
      <pattern>
	<pattern-item n="adv_preadv"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
	      <tag><clip pos="1" side="tl" part="neg"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_adv"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="ADV ITG">
      <pattern>
	<pattern-item n="advitg"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="a_adv"/></tag>	
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="PRONOM tònic/interrogatiu/possessiu EO">
      <pattern>
	<pattern-item n="tn_itg_pos"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="nombre_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="nom_cas">
          <with-param pos="1"/>
        </call-macro>

	<out>
	  <chunk name="prn_int" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="nombre"/></tag>
              <tag><var n="case"/></tag>
              <tag><var n="changecase"/></tag>

	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="PRONOM indefinit i companyia (EO)">
      <pattern>
	<pattern-item n="tn"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>

	<out>
	  <chunk name="prn_nosubj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

<rule comment="PRONOM relatiu EO">
      <pattern>
	<pattern-item n="relatiu"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="prn" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SNrelatiu"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>
	      <lit-tag v="4"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


<rule comment="PREP + PRONOM relatiu EO( dels quals, pels que, als que ...)">
      <pattern>
	<pattern-item n="prep"/>
	<pattern-item n="relatiu_prep"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="nom_cas">
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="nombre_nom">
	  <with-param pos="2"/>
	</call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
	<out>
          <chunk namefrom="nprep" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="pr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
	  <b pos="1"/>
	  <chunk name="prn">
	    <tags>
	      <tag><lit-tag v="SNrelatiu"/></tag>
              <tag><lit-tag v="rel"/></tag>
	      <tag><var n="nombre"/></tag>
	      <tag><var n="case"/></tag>
	    </tags>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/>
	      <clip pos="2" side="tl" part="a_prn"/>
              <lit-tag v="nn"/>
	      <clip pos="2" side="tl" part="nbr" link-to="3"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="PRN personal">
      <pattern>
	<pattern-item n="prpers"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="prpers" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="pers"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_prn"/>
	      <clip pos="1" side="tl" part="tipus_prn" link-to="2"/>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>


 <rule comment="CNJ">
      <pattern>
	<pattern-item n="cnj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<out>
	  <chunk name="cnj" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="tags"/></tag>		
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule comment="PREP">
      <pattern>
	<pattern-item n="prep"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <let><var n="nprep"/><clip pos="1" side="tl" part="lem"/></let>
	<out>
	  <chunk namefrom="nprep" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="pr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule>

    <rule> <!-- REGLA: reset variables, hem afegit la coma per al pro-drop (cal veure el reset de variablesi EO)-->
      <pattern>
	<pattern-item n="sent"/>
      </pattern>
      <action>
	<let>
	  <var n="nombre"/>
	  <lit-tag v="sg"/>
	</let>
	<let>
	  <var n="genere"/>
	  <lit-tag v="m"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=";"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=","/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=":"/>
		  </equal>
		</or>
	      </not>
	    </test>	
	    <let>
	      <var n="EOS"/>
	      <lit v="true"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="punt">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule> <!-- REGLA: sent_coma (hem afegit regla per a la coma per al pro-drop (no l'imcloem a l'anterior per no fer el reset de variables EO))-->
      <pattern>
	<pattern-item n="sent_coma"/>
      </pattern>
      <action>
	<out>
	  <chunk name="cm">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

  </section-rules>
</transfer>
